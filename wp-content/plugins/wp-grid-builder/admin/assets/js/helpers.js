/*!
* WP Grid Builder Plugin
*
* @package   WP Grid Builder
* @author    Loïc Blascos
* @link      https://www.wpgridbuilder.com
* @copyright 2019-2020 Loïc Blascos
*
*/
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports&&module.exports?module.exports=t():e.WPGB_Tooltip=t()}(window,function(){"use strict";function e(e){e.wpgb_tooltip||e.getAttribute("aria-label")&&(this.element=e,this.event=this.leave.bind(this),this.method=this.element.getAttribute("data-method"),this.layout=this.element.getAttribute("data-layout"),this.element.wpgb_tooltip=1,"click"===this.method?this.element.addEventListener("click",this.reveal.bind(this),!1):(this.element.addEventListener("mouseenter",this.reveal.bind(this),!1),this.element.addEventListener("mouseleave",this.leave.bind(this),!1),this.element.addEventListener("focus",this.reveal.bind(this),!1),this.element.addEventListener("blur",this.leave.bind(this),!1)))}var i=function(){var e=document.createElement("div"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in t)if(t.hasOwnProperty(i)&&void 0!==e.style[i])return e=null,t[i]}(),t=e.prototype;return t.create=function(){this.tooltip=document.createElement("div"),this.tooltip.className="wpgb-tooltip",this.tooltip.className+=this.layout?" wpgb-tooltip-"+this.layout:"",this.tooltip.textContent=this.element.getAttribute("aria-label"),this.tooltip.appendChild(document.createElement("span")),document.body.appendChild(this.tooltip)},t.reveal=function(){this.tooltip||(this.create(),this.position()),"click"===this.method&&(document.addEventListener("click",this.event,!1),window.addEventListener("resize",this.event,!1)),this.tooltip.classList.add("wpgb-show")},t.leave=function(e){if(this.tooltip){var t=window.getComputedStyle(this.tooltip).visibility;"click"===this.method&&"visible"!==t&&e.target===this.element||("visible"===t?(this.tooltip.addEventListener(i,this.remove.bind(this),!1),this.tooltip.classList.remove("wpgb-show")):this.remove(),"click"===this.method&&(document.removeEventListener("click",this.event,!1),window.removeEventListener("resize",this.event,!1)))}},t.remove=function(e){!this.tooltip||!this.tooltip.parentNode||e&&"visibility"!==e.propertyName||(this.tooltip=this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null)},t.position=function(){var e=this.tooltip.offsetWidth,t=this.element.getBoundingClientRect(),i=t.left+(t.width-e)/2;i+e>document.body.clientWidth?i=(i=t.left-e+t.width)<0?0:i:i<0&&(i=t.left),this.tooltip.style.left=i+"px";var s=t.left+t.width/2-i,n=t.top-this.tooltip.offsetHeight-5,o=document.querySelector("#wpadminbar");n<(o?o.clientHeight:0)&&(n=t.bottom+5,this.tooltip.firstElementChild.className="top"),this.tooltip.firstElementChild.style.left=s+"px",this.tooltip.style.top=n+window.pageYOffset+"px"},e});var WPGB_Tooltip_Init=function(){for(var e=document.querySelectorAll(".wpgb-tooltip"),t=document.querySelectorAll("[data-tooltip]"),i=0,s=e.length;i<s;i++)e[i]=document.body.removeChild(e[i]),e[i]=null;for(i=0,s=t.length;i<s;i++)new WPGB_Tooltip(t[i])};function WPGB_Dialog(e,t){if(void 0!==e){var i=document.getElementById("wpgb-admin-main"),s=document.createElement("div"),n=document.createElement("div"),o=document.createElement("h3"),r=document.createElement("span"),a=document.createElement("div"),l=document.createElement("button"),c=document.createElement("button");s.className="wpgb-dialog-overlay",n.className="wpgb-dialog",l.className="wpgb-dialog-title",l.className="wpgb-dialog-confirm wpgb-button wpgb-green",c.className="wpgb-dialog-cancel wpgb-button wpgb-red",l.type="button",c.type="button",o.textContent=e.title,r.textContent=e.message,l.textContent=e.confirm,c.textContent=e.cancel,n.setAttribute("role","dialog"),n.setAttribute("tabindex","-1"),n.appendChild(o),n.appendChild(r),a.appendChild(c),a.appendChild(l),n.appendChild(a),s.appendChild(n),i.appendChild(s),l.focus(),s.getClientRects(),s.className+=" wpgb-show";function h(){s&&(s.className="wpgb-dialog-overlay",setTimeout(function(){s&&(s=s.parentNode.removeChild(s),s=null)},200))}function d(){s&&(h(),t())}document.onkeydown=function(e){if(s){e.preventDefault();var t=e.keyCode;27===t?h():13===t&&d()}},document.onclick=function(e){s&&e.target.classList.contains("wpgb-dialog-overlay")&&h()},l.onclick=d,c.onclick=h}else t()}WPGB_Tooltip_Init(),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports&&module.exports?module.exports=t():e.WPGB_AngleInput=t()}(this,function(){"use strict";function e(e,t){this.element=e,this.value=t||0,this.events={click:this.click.bind(this),pointerDown:this.pointerDown.bind(this),pointerMove:this.pointerMove.bind(this),pointerUp:this.pointerUp.bind(this)},this.init(),this.setAngle()}var t=e.prototype;return t.init=function(){this.pivot=document.createElement("span"),this.input=document.createElement("input"),this.pivot.className="wpgb-angle-pivot",this.input.className="wpgb-angle-input",this.input.setAttribute("aria-label","°"),this.element.appendChild(this.pivot),this.element.appendChild(this.input),this.input.addEventListener("input",this.onInput.bind(this),!1),this.input.addEventListener("click",this.focusIn.bind(this),!1),this.input.addEventListener("focusout",this.focusOut.bind(this),!1),this.element.addEventListener("mousedown",this.events.pointerDown,!1)},t.pointerDown=function(e){e.target===this.pivot&&(e.preventDefault(),e.stopPropagation(),this.element.classList.add("is-dragging"),this.getAngle(e),this.setAngle(),window.addEventListener("mousemove",this.events.pointerMove,!1),window.addEventListener("mouseup",this.events.pointerUp,!1))},t.pointerMove=function(e){this.getAngle(e),this.setAngle(),document.addEventListener("click",this.events.click,!0)},t.pointerUp=function(){this.element.classList.remove("is-dragging"),window.removeEventListener("mousemove",this.events.pointerMove,!1),window.removeEventListener("mouseup",this.events.pointerUp,!1)},t.click=function(e){e.preventDefault(),e.stopPropagation(),document.removeEventListener("click",this.events.click,!0)},t.getAngle=function(e){var t=this.element.getBoundingClientRect(),i=e.clientX-(t.left+t.width/2),s=e.clientY-(t.top+t.height/2);this.value=180-Math.atan2(i,s)/Math.PI*180},t.setAngle=function(){this.value=(parseInt(this.value)+360|0)%360,this.input.value=this.value+"°",this.pivot.style.transform="rotate("+this.value+"deg)",this.fireEvent()},t.focusIn=function(e){e.target.setSelectionRange(0,e.target.value.length),this.element.classList.add("is-focused")},t.focusOut=function(){this.element.classList.remove("is-focused")},t.onInput=function(e){var t=e.target.selectionStart;this.value=parseInt(e.target.value),this.setAngle(),e.target.selectionEnd=t},t.fireEvent=function(){var e;document.createEvent?((e=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),this.input.dispatchEvent(e)):(e=document.createEventObject(),this.input.fireEvent("onchange",e))},e}),function(e,t){"object"==typeof exports?module.exports=t(e):"function"==typeof define&&define.amd?define([],t.bind(e,e)):t(e)}(this,function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;function t(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,i=String(e),s=i.length,n=-1,o="",r=i.charCodeAt(0);++n<s;)0!=(t=i.charCodeAt(n))?o+=1<=t&&t<=31||127==t||0==n&&48<=t&&t<=57||1==n&&48<=t&&t<=57&&45==r?"\\"+t.toString(16)+" ":(0!=n||1!=s||45!=t)&&(128<=t||45==t||95==t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122)?i.charAt(n):"\\"+i.charAt(n):o+="�";return o}return e.CSS||(e.CSS={}),e.CSS.escape=t}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports&&module.exports?module.exports=t():e.WPGB_Select=t()}(this,function(){"use strict";function e(e,t){if(this.element=e,this.element.wpgb_select)return!1;this.async=e.getAttribute("data-async"),this.search=e.getAttribute("data-search"),this.options=this.extend(t,i),this.request=null,this.scrollTop=0,this.element.wpgb_select=!0,this.buildPlaceholder(),this.init()}var i={url:null,lang:null,nonce:null,action:null,search:null,searching:null,noresult:null,error:null},t=e.prototype;return t.init=function(){this.events={keydown:this.keydown.bind(this),position:this.setPosition.bind(this),close:this.close.bind(this)},this.selection&&this.selection.addEventListener("click",this.removeSelectedItems.bind(this)),this.clearSelect&&this.clearSelect.addEventListener("click",this.clearSelection.bind(this)),this.element.onchange=this.onChange.bind(this),this.holder.addEventListener("click",this.open.bind(this),!1),this.element.addEventListener("click",this.open.bind(this),!1)},t.extend=function(e,t){if(e)for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.dispatchEvent=function(e,t){var i;document.createEvent?((i=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(i)):((i=document.createEventObject()).eventType=t,e.fireEvent("on"+i.eventType,i))},t.bindEvents=function(e){e=(e=void 0===e||!!e)?"addEventListener":"removeEventListener",window[e]("keydown",this.events.keydown,!1),window[e]("scroll",this.events.position,!1),window[e]("resize",this.events.close,!1),document[e]("click",this.events.close,!1)},t.removeItems=function(e){for(;e.firstChild;){var t=e.firstChild;e.removeChild(t),t=null}},t.removeDiacritics=function(e){return String.prototype.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e},t.getScrollParent=function(e){for(var t=e.parentElement;t!==document.body;){var i=getComputedStyle(t,null),s=i.getPropertyValue("overflow");if(s+=i.getPropertyValue("overflow-y"),/(auto|scroll)/.test(s))return t;t=t.parentElement}},t.open=function(e){e.preventDefault(),this.select?this.remove():(this.element===e.target&&e.stopImmediatePropagation(),this.buildList(),this.wrapper.classList.add("wpgb-select-open"),this.select.id="wpgb-select-"+this.element.name,document.body.appendChild(this.select),this.scrollParent=this.getScrollParent(this.element),this.scrollParent&&(setTimeout(function(){this.scrollParent.classList.add("wpgb-disable-scroll")}.bind(this),32),setTimeout(this.setPosition.bind(this),32)),this.setPosition(),this.results.scrollTop=this.scrollTop,this.input&&this.input.focus(),this.bindEvents(!0))},t.close=function(e){!this.select||"resize"!==e.type&&(this.select.contains(e.target)||this.holder.contains(e.target))||this.remove()},t.remove=function(){this.wrapper.classList.remove("wpgb-select-open"),this.scrollTop=this.input&&this.input.value?0:this.results.scrollTop,this.select=document.body.removeChild(this.select),this.select=null,this.scrollParent&&this.scrollParent.classList.remove("wpgb-disable-scroll"),this.bindEvents(!1)},t.displayMessage=function(e,t){var i=this.results.querySelector(".wpgb-select-message"),s=this.results.querySelector(".wpgb-select-option");if(i&&(i.parentNode.removeChild(i),i=null),t&&s||this.removeItems(this.results),e){var n=document.createElement("LI");n.classList.add("wpgb-select-message"),n.textContent=this.options[e],t&&s?this.results.insertBefore(n,this.results.firstChild):this.results.appendChild(n),this.setPosition()}},t.setPosition=function(){if(this.select){this.select.classList.remove("wpgb-select-top-position"),this.holder.classList.remove("wpgb-select-top-position");var e=this.holder.getBoundingClientRect(),t=(this.input?e.top:e.bottom)+window.pageYOffset;if((t=this.input&&this.element.multiple&&0<this.selection.childElementCount?t+this.holder.clientHeight:t)+this.select.clientHeight>window.innerHeight+window.pageYOffset){var i=(this.input?e.bottom:e.top)+window.pageYOffset-this.select.clientHeight;t=0<=(i=this.input&&this.element.multiple&&0<this.selection.childElementCount?i-this.holder.clientHeight:i)?i:t,this.select.classList[0<=i?"add":"remove"]("wpgb-select-top-position"),this.holder.classList[0<=i?"add":"remove"]("wpgb-select-top-position")}this.select.style.left=e.left+"px",this.select.style.top=t+"px"}},t.keydown=function(e){this.select&&27===e.keyCode&&this.remove()},t.buildPlaceholder=function(){this.wrapper=document.createElement("DIV"),this.holder=document.createElement("DIV"),this.placeholder=document.createElement("SPAN"),this.wrapper.style.width=this.element.style.width,this.wrapper.classList.add("wpgb-select-wrapper"),this.holder.classList.add("wpgb-select"),this.placeholder.classList.add("wpgb-select-placeholder"),this.holder.appendChild(this.placeholder),this.addSelection(),this.wrapper.appendChild(this.holder),this.element.parentNode.insertBefore(this.wrapper,this.element.nextSibling),this.wrapper.insertBefore(this.element,this.wrapper.firstChild)},t.addSelection=function(){if(this.element.multiple){var e=this.element.querySelector("option");this.placeholder.textContent=e?e.textContent:null,this.selection=document.createElement("UL"),this.selection.classList.add("wpgb-selection"),this.holder.appendChild(this.selection),this.addSelectedItems()}else{var t=Math.max(0,this.element.selectedIndex);this.placeholder.classList.add("wpgb-select-selected"),this.placeholder.textContent=this.element[t]?this.element[t].textContent:null,this.element[0]&&(this.element[0].value||(this.placeholder.classList[0<t?"add":"remove"]("wpgb-select-selected"),this.clearSelect=document.createElement("SPAN"),this.clearSelect.classList.add("wpgb-select-clear"),this.holder.appendChild(this.clearSelect),0===t&&(this.clearSelect.style.display="none")))}},t.addSelectedItems=function(){this.removeItems(this.selection);for(var e=this.element.querySelectorAll("option"),t=document.createDocumentFragment(),i=0,s=e.length;i<s;i++){var n=e[i];if(n.selected){var o=document.createElement("LI"),r=document.createElement("SPAN");r.classList.add("wpgb-selected-remove"),o.classList.add("wpgb-selected-item"),o.textContent=n.textContent,o.wpgb_value=n.value,o.insertBefore(r,o.firstChild),t.appendChild(o)}}this.selection.appendChild(t),this.placeholder.style.display=0<this.selection.childElementCount?"none":"block"},t.removeSelectedItems=function(e){var t=e.target;if(t.classList.contains("wpgb-selected-remove")){var i=t.parentElement,s=this.element.querySelector('[value="'+CSS.escape(i.wpgb_value)+'"]');i&&(i=i.parentElement.removeChild(i),s.selected=i=null),this.placeholder.style.display=0<this.selection.childElementCount?"none":"block",this.dispatchEvent(this.element,"change")}},t.clearSelection=function(e){e&&(e.preventDefault(),e.stopPropagation()),this.element.value=null,this.placeholder.textContent=this.element[0].textContent,this.clearSelect.style.display="none",this.placeholder.classList.remove("wpgb-select-selected"),this.select&&this.remove(),e&&this.dispatchEvent(this.element,"change")},t.getItems=function(e,t){if(!e){var i=document.createDocumentFragment();t=this.results=document.createElement("UL"),e=this.element.children,t.classList.add("wpgb-select-results"),i.appendChild(t),e.length&&(1!==e.length||this.element[0].value||!this.placeholder)||this.async||this.displayMessage("noresult")}if(this.async)return t;for(var s=0,n=e.length;s<n;s++){var o,r=e[s];if(!(r instanceof HTMLElement))return null;if("optgroup"===r.localName){o=document.createElement("LI");var a=document.createElement("UL"),l=document.createElement("STRONG"),c=this.getItems(r.children,a);o.classList.add("wpgb-select-group"),a.classList.add("wpgb-select-group"),l.classList.add("wpgb-select-label"),l.textContent=r.label,o.appendChild(l),o.appendChild(c),t.appendChild(o)}else"option"===r.localName&&(o=document.createElement("LI"),""!==r.value&&(o.classList.add("wpgb-select-option"),o.classList[r.disabled?"add":"remove"]("wpgb-select-disabled"),o.classList[r.selected?"add":"remove"]("wpgb-selected"),o.textContent=r.textContent,o.wpgb_value=r.value,o.disabled=!!r.disabled||null,t.appendChild(o)))}return t},t.populateList=function(e){if(!e||e.length<=0)this.displayMessage("noresult");else{var t;if(Array.isArray(e))t=this.populateItem(e);else for(var i in t=document.createDocumentFragment(),e)if(e.hasOwnProperty(i)){var s=document.createElement("LI"),n=document.createElement("UL"),o=document.createElement("STRONG"),r=this.populateItem(e[i]);s.classList.add("wpgb-select-group"),n.classList.add("wpgb-select-group"),o.classList.add("wpgb-select-label"),o.textContent=i,n.appendChild(r),s.appendChild(o),s.appendChild(n),t.appendChild(s)}this.results.appendChild(t),this.setPosition()}},t.populateItem=function(e){for(var t=document.createDocumentFragment(),i=0,s=e.length;i<s;i++){var n=e[i],o=document.createElement("LI"),r=this.element.querySelector('[value="'+CSS.escape(n.value)+'"]');o.classList.add("wpgb-select-option"),o.classList[n.disabled?"add":"remove"]("wpgb-select-disabled"),o.classList[r&&r.selected?"add":"remove"]("wpgb-selected"),o.innerHTML=n.content||null,o.wpgb_value=n.value||null,o.disabled=!!n.disabled||null,o.option=n.option,t.appendChild(o)}return t},t.buildList=function(){if(this.select=document.createElement("DIV"),this.select.classList.add("wpgb-select-container"),this.select.classList[this.selection&&0<this.selection.childElementCount?"add":"remove"]("wpgb-select-multiple"),this.select.style.width=this.wrapper.clientWidth+"px",this.search||this.async){var e=this.async?"searchAsync":"searchString";this.input=document.createElement("INPUT"),this.input.classList.add("wpgb-select-search"),this.input.addEventListener("keyup",this[e].bind(this),!1),this.select.classList.add("wpgb-select-has-search"),this.select.appendChild(this.input),this.addSearchIcon()}this.select.appendChild(this.getItems()),this.results.addEventListener("click",this.selectItem.bind(this),!1),this.async&&this.displayMessage("search")},t.addSearchIcon=function(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),i=document.createElementNS(e,"path");t.setAttribute("class","wpgb-select-icon"),t.setAttribute("viewBox","0 0 16 16"),t.setAttribute("width",13),t.setAttribute("height",13),i.setAttributeNS(null,"d","M12.7 11.3c0.9-1.2 1.4-2.6 1.4-4.2C14.1 3.2 11 0 7.1 0S0 3.2 0 7.1c0 3.9 3.2 7.1 7.1 7.1 1.6 0 3.1-0.5 4.2-1.4l3 3c0.2 0.2 0.5 0.3 0.7 0.3s0.5-0.1 0.7-0.3c0.4-0.4 0.4-1 0-1.4L12.7 11.3zM7.1 12.1C4.3 12.1 2 9.9 2 7.1S4.3 2 7.1 2s5.1 2.3 5.1 5.1S9.9 12.1 7.1 12.1z"),t.appendChild(i),this.select.appendChild(t)},t.selectItem=function(e){for(var t=e.target;"UL"!==t.tagName&&"LI"!==t.tagName;)t=t.parentElement;if(!t.disabled&&"LI"===t.tagName&&t.hasOwnProperty("wpgb_value")){if(this.addOption(t),this.element.multiple){var i=this.element.querySelector('[value="'+CSS.escape(t.wpgb_value)+'"]');i&&(i.selected=!i.selected||null)}else this.element.value=t.wpgb_value;this.remove(),this.dispatchEvent(this.element,"change")}},t.onChange=function(){if(this.element.multiple)this.addSelectedItems(),this.placeholder.style.display=0<this.selection.childElementCount?"none":"block";else{if(this.clearSelect){if(this.element.value===this.element[0].value)return void this.clearSelection();this.clearSelect.style.display=""!==this.element.value?"block":"none",this.placeholder.classList[""!==this.element.value?"add":"remove"]("wpgb-select-selected")}var e=this.element.selectedIndex;this.placeholder.textContent=-1<e?this.element[e].textContent:null}},t.addOption=function(e){if(!this.element.querySelector('[value="'+CSS.escape(e.wpgb_value)+'"]')){var t=document.createElement("OPTION");t.value=e.wpgb_value,t.textContent=e.option||e.textContent,this.element.appendChild(t)}},t.searchString=function(){this.found=0;var e=this.removeDiacritics(this.input.value).toLowerCase();this.searchItems(e,this.results),this.results.scrollTop=this.scrollTop,this.displayMessage(this.found<=0?"noresult":null,!0),this.setPosition()},t.searchItems=function(e,t){if(t&&t.children.length){for(var i=0,s=0,n=(t=t.children).length;s<n;s++){var o=t[s];if(o.classList.contains("wpgb-select-option")){-1<this.removeDiacritics(o.textContent).toLowerCase().indexOf(e)?(o.style.display="block",this.found++,i++):o.style.display="none"}else{var r=this.searchItems(e,o),a=o.parentElement;a&&a.classList.contains("wpgb-select-group")&&(a.style.display=r<=0?"none":"block")}}return i}},t.searchAsync=function(){var e={data:this.element.getAttribute("data-post")||"",search:this.input.value,lang:this.options.lang,nonce:this.options.nonce,action:this.options.action,method:this.async,object:"content"},t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));this.request&&this.request.abort(),this.input.value?(this.displayMessage("searching",!0),this.request=new XMLHttpRequest,this.request.open("POST",ajaxurl),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.request.onload=function(){if(200<=this.request.status&&this.request.status<400){var e=JSON.parse(this.request.responseText);if(!e.success)return void this.displayMessage("error");this.removeItems(this.results),this.populateList(e.content)}else this.displayMessage("error")}.bind(this),this.request.onerror=function(){this.displayMessage("error")},this.request.send(t.join("&"))):this.displayMessage("search")},e});var WPGB_Select_Init=function(){for(var e=document.querySelectorAll("#wpgb select"),t=wpgb_select_L10n,i=0,s=e.length;i<s;i++)new WPGB_Select(e[i],{url:ajaxurl,lang:wpgb_L10n.lang,nonce:wpgb_L10n.search,action:"wpgb_search",search:t.search,searching:t.searching,noresult:t.no_result,error:t.error})};document.addEventListener("DOMContentLoaded",function(){WPGB_Select_Init()}),function(l){if("undefined"!=typeof Color){Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);return this.error?"":(e.length<6&&(e=("00000"+e).substr(-6)),"#"+e)},l.widget("wp.wpColorPicker",l.wp.wpColorPicker,{_create:function(){if(l.support.iris)if(this.options.__){var i=this,e=i.element;l.extend(i.options,e.data()),i.close=l.proxy(i.close,i),i.initialValue=e.val(),e.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />'),i.wrap=e.parent(),i.toggler=l('<a tabindex="0" class="wp-color-result" />').insertBefore(e).css({backgroundColor:i.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),i.pickerContainer=l('<div class="wp-picker-holder" />').insertAfter(e),i.button=l('<input type="button" class="button button-small hidden" />'),i.options.defaultColor?i.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString).attr("aria-label",wpColorPickerL10n.defaultAriaLabel):i.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear).attr("aria-label",wpColorPickerL10n.clearAriaLabel),e.wrap('<span class="wp-picker-input-wrap" />').after(i.button),e.iris({wpgb:1,target:i.pickerContainer,hide:i.options.hide,width:i.options.width,mode:i.options.mode,palettes:i.options.palettes,change:function(e,t){i.options.alpha?i.toggler.find("span").css({width:"100%",height:"100%",position:"absolute",top:0,left:0,"border-top-left-radius":"3px","border-bottom-left-radius":"3px",background:t.color.toString()}):i.toggler.css({backgroundColor:t.color.toString()}),l.isFunction(i.options.change)&&i.options.change.call(this,e,t)}}),e.val(i.initialValue),i._addListeners(),i.options.hide||i.toggler.click()}else this._super()},_addListeners:function(){var t=this;t.wrap.on("click.wpcolorpicker",function(e){e.stopPropagation()}),t.toggler.on("click",function(){t.toggler.hasClass("wp-picker-open")?t.close():t.open()}),t.element.on("change",function(e){""!==l(this).val()&&!t.element.hasClass("iris-error")||(t.options.alpha?(t.toggler.removeAttr("style"),t.toggler.find("span").css("backgroundColor","")):t.toggler.css("backgroundColor",""),l.isFunction(t.options.clear)&&t.options.clear.call(this,e))}),t.toggler.on("keyup",function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),t.toggler.trigger("click").next().focus())}),t.button.on("click",function(e){l(this).hasClass("wp-picker-clear")?(t.element.val(""),t.options.alpha?(t.toggler.removeAttr("style"),t.toggler.find("span").css("backgroundColor","")):t.toggler.css("backgroundColor",""),l.isFunction(t.options.clear)&&t.options.clear.call(this,e)):l(this).hasClass("wp-picker-default")&&t.element.val(t.options.defaultColor).change()})}}),l.widget("a8c.iris",l.a8c.iris,{_create:function(){if(this._super(),this.options.wpgb&&(this.options.alpha=this.element.data("alpha")||!1,this.picker.find(".iris-square-value").attr("aria-label","iris"),this.element.is(":input")||(this.options.alpha=!1),void 0!==this.options.alpha&&this.options.alpha)){var i=this,e=i.element,t=l('<div class="iris-slider iris-strip iris-alpha-slider"><div class="iris-alpha-slider-bg"></div><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>').insertAfter(i.picker.find(".iris-slider.iris-strip")),s=t.find(".iris-slider-offset-alpha"),n={aContainer:t,aSlider:s};void 0!==e.data("custom-width")?i.options.customWidth=parseInt(e.data("custom-width"))||0:i.options.customWidth=100,i.options.defaultWidth=e.width(),(i._color._alpha<1||-1!=i._color.toString().indexOf("rgb"))&&e.width(parseInt(i.options.defaultWidth+i.options.customWidth)),l.each(n,function(e,t){i.controls[e]=t}),i.controls.square.css({"margin-right":"0"});var o=i.picker.width()-i.controls.square.width()-20,r=o/6,a=o/2-r;l.each(["aContainer","strip"],function(e,t){i.controls[t].width(a).css({"margin-left":r+"px"})}),i._initControls(),i._change()}},_initControls:function(){if(this._super(),this.options.wpgb&&this.options.alpha){var i=this;i.controls.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*i._color._alpha),slide:function(e,t){i._color._alpha=parseFloat(t.value/100),i._change.apply(i,arguments)}})}},_change:function(){this._super();var e=this,t=e.element;if(this.options.wpgb&&this.options.alpha){var i=e.controls,s=parseInt(100*e._color._alpha),n=e._color.toRgb(),o=["rgb("+n.r+","+n.g+","+n.b+") 0%","rgba("+n.r+","+n.g+","+n.b+", 0) 100%"],r=e.options.defaultWidth,a=e.options.customWidth;i.aContainer.find("div").first().css({background:"linear-gradient(to bottom, "+o.join(", ")+")"}),i.aSlider.slider("value",s),e._color._alpha<1?(i.strip.attr("style",i.strip.attr("style").replace(/rgba\\(([0-9]+,)(\\s+)?([0-9]+,)(\\s+)?([0-9]+)(,(\\s+)?[0-9\\.]+)\\)/g,"rgb($1$3$5)")),t.width(parseInt(r+a))):t.width(r)}!t.data("reset-alpha")&&1||e.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){e._color._alpha=1,e.active="external",e._change()})},_addInputListeners:function(s){function e(e){var t=new Color(s.val()),i=s.val();s.removeClass("iris-error"),t.error?""!==i&&s.addClass("iris-error"):t.toString()!==n._color.toString()&&("keyup"===e.type&&i.match(/^[0-9a-fA-F]{3}$/)||n._setOption("color",t.toString()))}var n=this;s.on("change",e).on("keyup",n._debounce(e,100)),n.options.hide&&s.on("focus",function(){n.show()})}})}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports&&module.exports?module.exports=t():e.WPGB_Gradient=t()}(this,function(){"use strict";function e(e,t){if(e.wpgb_gradient)return!1;this.i18n=t,this.DOM={},this.points={},this.element=e,this.centerX=50,this.centerY=50,this.events={open:this.open.bind(this),close:this.close.bind(this),clear:this.clear.bind(this),resize:this.resize.bind(this),togglePicker:this.togglePicker.bind(this),showPresets:this.showPresets.bind(this),createPoint:this.createPoint.bind(this),reversePoints:this.reversePoints.bind(this),setColorType:this.setColorType.bind(this),setGradientType:this.setGradientType.bind(this),setGradientCenter:this.setGradientCenter.bind(this),deletePoint:this.deletePoint.bind(this),onFocus:this.onFocus.bind(this),onInput:this.onInput.bind(this)},this.element.wpgb_gradient=!0,this.init()}var s=["linear-gradient(19deg, #21D4FD 0%, #B721FF 100%)","linear-gradient(0deg, #08AEEA 0%, #2AF598 100%)","linear-gradient(90deg, #FEE140 0%, #FA709A 100%)","linear-gradient(62deg, #8EC5FC 0%, #E0C3FC 100%)","linear-gradient(19deg, #FAACA8 0%, #DDD6F3 100%)","linear-gradient(62deg, #FBAB7E 0%, #F7CE68 100%)","linear-gradient(0deg, #D9AFD9 0%, #97D9E1 100%)","linear-gradient(90deg, #00DBDE 0%, #FC00FF 100%)","linear-gradient(132deg, #F4D03F 0%, #16A085 100%)","linear-gradient(160deg, #0093E9 0%, #80D0C7 100%)","linear-gradient(90deg, #74EBD5 0%, #9FACE6 100%)","linear-gradient(270deg, #FAD961 0%, #F76B1C 99%)","linear-gradient(45deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%)","linear-gradient(45deg, #FBDA61 0%, #FF5ACD 100%)","linear-gradient(135deg, #8BC6EC 0%, #9599E2 100%)","linear-gradient(180deg, #A9C9FF 0%, #FFBBEC 100%)","linear-gradient(19deg, #3EECAC 0%, #EE74E1 100%)","linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%)","linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%)","linear-gradient(90deg, #eea2a2 0%, #bbc1bf 19%, #57c6e1 42%, #b49fda 79%, #7ac5d8 100%)","linear-gradient(0deg, #fcc5e4 0%, #fda34b 15%, #ff7882 35%, #c8699e 52%, #7046aa 71%, #0c1db8 87%, #020f75 100%)","linear-gradient(0deg, #dbdcd7 0%, #dddcd7 24%, #e2c9cc 30%, #e7627d 46%, #b8235a 59%, #801357 71%, #3d1635 84%, #1c1a27 100%)","linear-gradient(0deg, #505285 0%, #585e92 12%, #65689f 25%, #7474b0 37%, #7e7ebb 50%, #8389c7 62%, #9795d4 75%, #a2a1dc 87%, #b5aee4 100%)","linear-gradient(0deg, #4fb576 0%, #44c489 30%, #28a9ae 46%, #28a2b7 59%, #4c7788 71%, #6c4f63 86%, #432c39 100%)","linear-gradient(0deg, #f43b47 0%, #453a94 100%)","linear-gradient(0deg, #e4afcb 0%, #b8cbb8 0%, #b8cbb8 0%, #e2c58b 30%, #c2ce9c 64%, #7edbdc 100%)","linear-gradient(0deg, #d5d4d0 0%, #d5d4d0 1%, #eeeeec 31%, #efeeec 75%, #e9e9e7 100%)","linear-gradient(0deg, #0fd850 0%, #f9f047 100%)","linear-gradient(90deg, #00dbde 0%, #fc00ff 100%)","linear-gradient(135deg, #FDEB71 10%, #F8D800 100%)","linear-gradient(135deg, #ABDCFF 10%, #0396FF 100%)","linear-gradient(135deg, #FEB692 10%, #EA5455 100%)","linear-gradient(135deg, #A0FE65 10%, #FA016D 100%)","linear-gradient(135deg, #FFCF71 10%, #2376DD 100%)","linear-gradient(135deg, #6B73FF 10%, #000DFF 100%)","linear-gradient(135deg, #FFF3B0 10%, #CA26FF 100%)","linear-gradient(135deg, #FFDB01 10%, #0E197D 100%)","linear-gradient(135deg, #92FFC0 10%, #002661 100%)","linear-gradient(135deg, #EECE13 10%, #B210FF 100%)","linear-gradient(135deg, #F0FF00 10%, #58CFFB 100%)"],t=e.prototype;return t.init=function(){this.buildMarkup(),this.getMarkup(),this.addEvents(),this.addPicker(),this.addAngle(),this.addCenter()},t.render=function(){this.removePoints(),this.getColor(),"solid"===this.colorType?this.showPicker():(this.setCanvas(),this.addPoints(),this.setAngle()),this.DOM.holder&&(this.setButtons(),this.DOM.holder.style.display="solid"===this.colorType?"none":"block")},t.dispatchEvent=function(e,t){var i;document.createEvent?((i=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(i)):((i=document.createEventObject()).eventType=t,e.fireEvent("on"+i.eventType,i))},t.buildMarkup=function(){var e="",t=this.element.getAttribute("data-gradient");t&&(e+='<ul class="wpgb-color-types">',e+='<li data-type="solid">'+this.i18n.solid+"</li>",e+='<li data-type="gradient">'+this.i18n.gradient+"</li>",e+="</ul>"),e+='<div class="wpgb-color-inner">',t&&(e+='<div class="wpgb-gradient-holder">',e+='<div class="wpgb-gradient-preview-holder">',e+='<div class="wpgb-gradient-preview"></div>',e+='<div class="wpgb-gradient-angle"></div>',e+='<div class="wpgb-gradient-center"></div>',e+='<ul class="wpgb-gradient-types">',e+='<li data-type="linear">'+this.i18n.linear+"</li>",e+='<li data-type="radial">'+this.i18n.radial+"</li>",e+='<li class="wpgb-gradient-reverse" title="'+this.i18n.reverse+'">',e+='<svg class="wpgb-reverse-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink/" xlink:href="'+this.i18n.icons.reverse+'"></use></svg>',e+="</li>",e+='<li class="wpgb-gradient-presets" title="'+this.i18n.presets+'">',e+='<svg class="wpgb-switch-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink/" xlink:href="'+this.i18n.icons.presets+'"></use></svg>',e+="</li>",e+="</ul>",e+="</div>",e+='<div class="wpgb-gradient-point-controls">',e+='<input class="wpgb-gradient-point-position" title="'+this.i18n.position+'">',e+='<span class="wpgb-gradient-point-delete" title="'+this.i18n.delete+'">',e+='<svg class="wpgb-delete-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink/" xlink:href="'+this.i18n.icons.delete+'"></use></svg>',e+="</span>",e+='<span class="wpgb-gradient-point-color" title="'+this.i18n.edit+'">',e+='<svg class="wpgb-color-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink/" xlink:href="'+this.i18n.icons.edit+'"></use></svg>',e+="</span>",e+="</div>",e+='<canvas class="wpgb-gradient-canvas" title="'+this.i18n.add+'"></canvas>',e+='<ul class="wpgb-gradient-points"></ul>',e+="</div>"),e+='<input class="wpgb-color-iris" data-alpha="'+this.element.getAttribute("data-alpha")+'" aria-label="'+this.i18n.color+'">',e+="</div>",this.DOM.wrapper=document.createElement("DIV"),this.DOM.wrapper.className="wpgb-color-holder",this.DOM.wrapper.innerHTML=e,this.element.appendChild(this.DOM.wrapper)},t.getMarkup=function(){this.DOM.input=this.element.querySelector(".wpgb-input"),this.DOM.picker=this.element.querySelector(".wpgb-color-picker"),this.DOM.clear=this.element.querySelector(".wpgb-color-clear"),this.DOM.preview=this.element.querySelector(".wpgb-color-picker-preview"),this.DOM.iris=this.element.querySelector(".wpgb-color-iris"),this.DOM.colorTypes=this.element.querySelector(".wpgb-color-types"),this.DOM.holder=this.element.querySelector(".wpgb-gradient-holder"),this.DOM.gradient=this.element.querySelector(".wpgb-gradient-preview"),this.DOM.canvas=this.element.querySelector(".wpgb-gradient-canvas"),this.DOM.points=this.element.querySelector(".wpgb-gradient-points"),this.DOM.color=this.element.querySelector(".wpgb-gradient-point-color"),this.DOM.delete=this.element.querySelector(".wpgb-gradient-point-delete"),this.DOM.position=this.element.querySelector(".wpgb-gradient-point-position"),this.DOM.gradientTypes=this.element.querySelector(".wpgb-gradient-types"),this.DOM.angle=this.element.querySelector(".wpgb-gradient-angle"),this.DOM.center=this.element.querySelector(".wpgb-gradient-center"),this.DOM.reverse=this.element.querySelector(".wpgb-gradient-reverse"),this.DOM.presets=this.element.querySelector(".wpgb-gradient-presets")},t.addEvents=function(){this.DOM.picker.addEventListener("click",this.events.open,!1),this.DOM.clear.addEventListener("click",this.events.clear,!1),this.DOM.holder&&(this.DOM.canvas.addEventListener("click",this.events.createPoint,!1),this.DOM.presets.addEventListener("click",this.events.showPresets,!1),this.DOM.reverse.addEventListener("click",this.events.reversePoints,!1),this.DOM.colorTypes.addEventListener("click",this.events.setColorType,!1),this.DOM.gradient.addEventListener("click",this.events.setGradientCenter,!1),this.DOM.gradientTypes.addEventListener("click",this.events.setGradientType,!1),this.DOM.color.addEventListener("click",this.events.togglePicker,!1),this.DOM.delete.addEventListener("click",this.events.deletePoint,!1),this.DOM.position.addEventListener("click",this.events.onFocus,!1),this.DOM.position.addEventListener("input",this.events.onInput,!1))},t.open=function(e){e.preventDefault(),"block"!==this.DOM.wrapper.style.display?(window.addEventListener("resize",this.events.resize,!1),document.addEventListener("click",this.events.close,!1),this.DOM.wrapper.style.display="block",this.DOM.clear.style.display="inline-block",this.render()):this.close()},t.close=function(e){if(e&&e.target!==this.element&&e.target!==this.DOM.color&&"wpgb-color-picker"!==e.target.className&&e.target.parentNode&&"wpgb-color-picker"!==e.target.parentNode.className&&("gradient"===this.colorType&&"block"===this.DOM.iris.style.display||this.DOM.presetsHolder))this.hidePicker();else{if(e)for(var t=e.target;t;){if(t===this.element)return;t=t.parentElement}document.body.contains(this.element)&&(this.hidePicker(),this.DOM.clear.style.display=this.DOM.wrapper.style.display="none"),window.removeEventListener("resize",this.events.resize,!1),document.removeEventListener("click",this.events.close,!1)}},t.clear=function(e){this.DOM.input.value="",this.dispatchEvent(this.DOM.input,"change"),this.render()},t.resize=function(){"solid"!==this.colorType&&(this.setCanvas(),this.setGradient())},t.getColor=function(){var e=this.DOM.input.value;-1<e.search("linear-gradient")||-1<e.search("radial-gradient")?(this.colorType="gradient",this.gradientType=-1<e.search("linear-gradient")?"linear":"radial",this.getGradient(e)):(this.colorType="solid",this.color=this.solidColor=this.DOM.preview.style.background=e),this.DOM.colorTypes||"gradient"!==this.colorType||(this.points={},this.DOM.input.value="",this.getColor())},t.getGradient=function(e){if(this.index=0,(e=e.match(/\((.*)\)/))[1]){for(var t=e[1].split(/,\s?(?![^(]*\))/),i=0;i<t.length;i++){var s=t[i].trim().split(/\s+\s?(?![^(]*\))/);0!==i?(this.points[this.index]={color:s[0]?s[0]:"#fff",position:s[1]?parseFloat(s[1])/100:0},this.index++):"linear"===this.gradientType?this.angle=parseInt(s[0]):this.DOM.center&&(this.centerX=s[2]?parseInt(s[2]):50,this.centerY=s[3]?parseInt(s[3]):50,this.DOM.center.style.left=this.centerX+"%",this.DOM.center.style.top=this.centerY+"%")}this.point=this.points[0]}},t.setButtons=function(){var e,t,i=this.DOM.colorTypes.querySelectorAll("[data-type]"),s=this.DOM.gradientTypes.querySelectorAll("[data-type]");for(t=0;t<i.length;t++)e=i[t].getAttribute("data-type"),i[t].classList[e===this.colorType?"add":"remove"]("wpgb-color-type-active");for(t=0;t<s.length;t++)e=s[t].getAttribute("data-type"),s[t].classList[e===this.gradientType?"add":"remove"]("wpgb-gradient-type-active");this.element.setAttribute("data-color-type",this.colorType||"none"),this.element.setAttribute("data-gradient-type",this.gradientType||"none")},t.setColorType=function(e){if("LI"===e.target.tagName){if(this.colorType=e.target.getAttribute("data-type"),"solid"===this.colorType){for(var t in this.points)if(this.points.hasOwnProperty(t)){this.DOM.input.value=this.solidColor||"";break}}else this.DOM.input.value=this.gradientColor=this.gradientColor?this.gradientColor:s[0];this.dispatchEvent(this.DOM.input,"change"),this.hidePicker(),this.render()}},t.setGradientType=function(e){"LI"===e.target.tagName&&(this.gradientType=e.target.getAttribute("data-type")||"linear",this.setGradient(),this.render())},t.onFocus=function(e){e.target.setSelectionRange(0,e.target.value.length)},t.onInput=function(e){var t=parseInt(e.target.selectionStart),i=Math.round(Math.min(Math.max(parseInt(e.target.value)||0,0),100));this.point.position=i/100,this.point.DOM.style.left=i+"%",this.setGradient(),e.target.value=i+"%",e.target.selectionEnd=t},t.addAngle=function(){this.DOM.angle&&(this.angleInput=new WPGB_AngleInput(this.DOM.angle),this.angleInput.input.onchange=function(){this.angle=this.angleInput.value,this.setGradient()}.bind(this))},t.setAngle=function(){this.angleInput.value=this.angle,this.angleInput.setAngle()},t.addCenter=function(){if(this.DOM.center){var i=this;jQuery(this.DOM.center).draggable({scroll:!1,containment:"parent",start:function(){i.DOM.center.classList.add("is-dragging")},drag:function(e,t){i.centerX=Math.round(100*Math.min(Math.max(t.position.left/i.DOM.gradient.clientWidth,0),1)),i.centerY=Math.round(100*Math.min(Math.max(t.position.top/i.DOM.gradient.clientHeight,0),1)),t.position.left=i.centerX/100*i.DOM.gradient.clientWidth,t.position.top=i.centerY/100*i.DOM.gradient.clientHeight,i.setGradient()},stop:function(e,t){i.centerX=Math.round(100*Math.min(Math.max(t.position.left/i.DOM.gradient.clientWidth,0),1)),i.centerY=Math.round(100*Math.min(Math.max(t.position.top/i.DOM.gradient.clientHeight,0),1)),i.DOM.center.style.left=i.centerX+"%",i.DOM.center.style.top=i.centerY+"%",i.DOM.center.classList.remove("is-dragging"),jQuery(e.originalEvent.target).one("click",function(e){e.preventDefault(),e.stopPropagation()})}}).disableSelection()}},t.setGradientCenter=function(e){e.preventDefault(),e.stopPropagation();var t=this.DOM.gradient.getBoundingClientRect();this.centerX=Math.round((e.pageX-t.left)/t.width*100),this.centerY=Math.round((e.pageY-(t.top+window.pageYOffset))/t.height*100),this.DOM.center.style.left=this.centerX+"%",this.DOM.center.style.top=this.centerY+"%",this.setGradient()},t.setCanvas=function(){this.DOM.canvas&&(this.DOM.canvas.width=parseInt(window.getComputedStyle(this.element).getPropertyValue("width")),this.DOM.canvas.height=parseInt(window.getComputedStyle(this.DOM.canvas).getPropertyValue("height")),this.canvas=this.DOM.canvas.getContext("2d"))},t.createPoint=function(e){e.preventDefault(),e.stopPropagation(),e.target===this.DOM.canvas&&(19<Object.keys(this.points).length||(this.index++,this.point=this.points[this.index]={color:this.getPointColor(e),position:Math.round((e.clientX-e.target.getBoundingClientRect().left)/this.DOM.holder.clientWidth*100)/100},this.addPoint(this.point),this.activePoint(),this.setGradient(),this.hidePicker()))},t.addPoint=function(e){e.DOM=document.createElement("LI"),e.DOM.className="wpgb-gradient-point",e.DOM.style.left=100*e.position+"%",e.DOM.style.background=e.color,e.DOM.appendChild(document.createElement("span")),e.DOM.firstChild.className="wpgb-gradient-point-bg",e.DOM.addEventListener("click",this.events.togglePicker,!1),this.DOM.points.appendChild(e.DOM),this.draggable(e)},t.addPoints=function(){if(this.points){for(var e in this.points)this.points.hasOwnProperty(e)&&(this.addPoint(this.points[e]),this.point||(this.point=this.points[e]));this.activePoint()}},t.selectPoint=function(e){for(var t in this.points)this.points.hasOwnProperty(t)&&this.points[t].DOM===e.target&&(this.point=this.points[t]);this.activePoint()},t.activePoint=function(){for(var e in this.points)this.points.hasOwnProperty(e)&&this.points[e].DOM.classList.remove("wpgb-gradient-point-active");this.color=this.point.color,this.point.DOM.classList.add("wpgb-gradient-point-active"),this.DOM.position.value=Math.round(100*this.point.position)+"%"},t.deletePoint=function(){if(!(Object.keys(this.points).length<3)){for(var e in this.points)if(this.points.hasOwnProperty(e)&&this.points[e].DOM===this.point.DOM){this.removePoint(e);break}this.point=this.points[Object.keys(this.points).slice(-1)[0]],this.hidePicker(),this.activePoint(),this.setGradient()}},t.removePoint=function(e){this.points[e].DOM=this.points[e].DOM.parentNode.removeChild(this.points[e].DOM),this.points[e].DOM=null,delete this.points[e]},t.removePoints=function(){for(var e in this.points)this.points.hasOwnProperty(e)&&this.removePoint(e)},t.getPointColor=function(e){e.preventDefault(),e.stopPropagation();var t=e.pageX-e.target.getBoundingClientRect().left,i=this.canvas.getImageData(t,0,1,1).data;return"rgba("+i[0]+","+i[1]+","+i[2]+", "+Math.round(i[3]/255*100)/100+")"},t.reversePoints=function(e){for(var t in e.preventDefault(),e.stopPropagation(),this.points)this.points.hasOwnProperty(t)&&(this.points[t].position=1-this.points[t].position,this.points[t].DOM.style.left=100*this.points[t].position+"%");this.DOM.position.value=Math.round(100*this.point.position)+"%",this.setGradient()},t.showPresets=function(e){e.preventDefault(),e.stopPropagation();var t=document.createDocumentFragment();this.DOM.presetsHolder=document.createElement("UL"),this.DOM.presetsHolder.className="wpgb-gradient-presets-holder";for(var i=0;i<s.length;i++)this.DOM.preset=document.createElement("LI"),this.DOM.preset.className="wpgb-gradient-preset",this.DOM.preset.style.background=s[i],t.appendChild(this.DOM.preset);this.DOM.presetsHolder.appendChild(t),this.DOM.holder.appendChild(this.DOM.presetsHolder),this.DOM.presetsHolder.addEventListener("click",this.setPreset.bind(this),!1)},t.removePresets=function(){this.DOM.presetsHolder&&(this.DOM.presetsHolder=this.DOM.presetsHolder.parentNode.removeChild(this.DOM.presetsHolder),this.DOM.presetsHolder=null)},t.setPreset=function(e){if("LI"===e.target.tagName){var t=[].slice.call(e.target.parentNode.children).indexOf(e.target);this.DOM.input.value=s[t],this.dispatchEvent(this.DOM.input,"change"),this.render()}},t.togglePicker=function(e){if(e.preventDefault(),e.stopPropagation(),e.target!==this.point.DOM&&e.target!==this.DOM.color)return this.hidePicker(),void this.selectPoint(e);"none"===this.DOM.iris.style.display?this.showPicker():this.hidePicker()},t.hidePicker=function(){jQuery(this.DOM.iris).iris("hide"),this.DOM.iris.style.display="none",this.DOM.color&&this.DOM.color.classList.remove("wpgb-gradient-point-active"),this.removePresets()},t.showPicker=function(){jQuery(this.DOM.iris).iris("show"),this.iris.wpColorPicker("color",this.color||""),this.DOM.iris.style.display="block",this.DOM.iris.value=this.color||"",this.DOM.color&&this.DOM.color.classList.add("wpgb-gradient-point-active")},t.setGradient=function(){this.gradientColor="",this.canvas.clearRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height),this.canvas.fillStyle="rgba(0, 0, 0, 0)",this.canvas.fillRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height);var e=this.canvas.createLinearGradient(0,0,this.canvas.canvas.width,0);if(this.points){"linear"===this.gradientType?(this.gradientColor+="linear-gradient(",this.gradientColor+=this.angle+"deg, "):(this.gradientColor+="radial-gradient(circle at ",this.gradientColor+=this.centerX+"% ",this.gradientColor+=this.centerY+"%, ");var i=this.points;for(var t in i=Object.keys(i).sort(function(e,t){return i[e].position-i[t].position}))if(i.hasOwnProperty(t)){t=i[t];var s=Math.min(Math.max(this.points[t].position,0),1);this.gradientColor+=this.points[t].color+" ",this.gradientColor+=Math.round(100*s)+"%, ",this.points[t].color&&e.addColorStop(s,this.points[t].color)}this.gradientColor=this.gradientColor.slice(0,-2),this.gradientColor+=")",this.canvas.fillStyle=e,this.canvas.fillRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height),this.DOM.gradient.style.background=this.gradientColor,this.DOM.preview.style.background=this.gradientColor,this.DOM.input.value!==this.gradientColor&&(this.DOM.input.value=this.gradientColor,this.dispatchEvent(this.DOM.input,"change"))}},t.draggable=function(i){var s,n=this;jQuery(i.DOM).draggable({scroll:!1,revert:150,axis:"x",containment:"parent",start:function(e){n.hidePicker(),n.selectPoint(e),i.DOM.removeEventListener("click",n.events.togglePicker,!1)},drag:function(e,t){s=Math.round(100*Math.min(Math.max(t.position.left/n.DOM.holder.clientWidth,0),1)),i.position=s/100,t.position.left=i.position*n.DOM.holder.clientWidth,n.DOM.position.value=s+"%",n.setGradient()},stop:function(e,t){s=Math.round(100*Math.min(Math.max(t.position.left/n.DOM.holder.clientWidth,0),1)),i.position=s/100,i.DOM.style.left=s+"%",n.DOM.position.value=s+"%",i.DOM.addEventListener("click",n.events.togglePicker,!1),jQuery(e.originalEvent.target).one("click",function(e){e.preventDefault(),e.stopPropagation()})}}).disableSelection()},t.addPicker=function(){var i=this;this.iris=jQuery(this.DOM.iris).wpColorPicker({__:1,change:function(e,t){"solid"===i.colorType?(i.color=i.solidColor=i.DOM.input.value=i.DOM.preview.style.background=t.color.toString(),i.dispatchEvent(i.DOM.input,"change")):i.point&&(i.color=i.point.color=i.point.DOM.style.background=t.color.toString(),i.setGradient()),i.element.classList.contains("is-dragging")||setTimeout(function(){i.switchIris()},10)},stop:function(){i.switchIris()}}),this.irisSquare=jQuery(this.element.querySelector(".iris-square-value")).draggable({start:function(){i.element.classList.add("is-dragging")},stop:function(){i.element.classList.remove("is-dragging"),i.switchIris()}}),jQuery(this.element.querySelectorAll(".iris-slider-offset")).slider({stop:function(e){jQuery(e.originalEvent.target).one("click",function(e){e.preventDefault(),e.stopPropagation()})}})},t.switchIris=function(){this.irisSquare&&.7<this.irisSquare[0].offsetLeft/this.DOM.wrapper.clientWidth?this.element.classList.add("wpgb-color-position-left"):this.irisSquare&&this.element.classList.remove("wpgb-color-position-left")},e});var WPGB_Gradient_Init=function(){for(var e=document.querySelectorAll(".wpgb-color"),t=0,i=e.length;t<i;t++)new WPGB_Gradient(e[t],wpgb_colorPicker_L10n)};WPGB_Gradient_Init();var WPGB_Popup_Timer,togglePasswordField=function(e){if("svg"===e.target.tagName){var t=e.target.previousElementSibling;if(t&&t.classList&&t.classList.contains("wpgb-password")){var i=t.getAttribute("type");t.setAttribute("type","text"===i?"password":"text")}}};document.body.addEventListener("click",togglePasswordField,!1);var WPGB_Popup_Message=function(e,t,i){var s=document.querySelector(".wpgb-popup"),n=wpgb_popup_L10n;i||n.hasOwnProperty(e)?(clearTimeout(WPGB_Popup_Timer),s.lastElementChild.innerHTML=i||n[e],s.className="wpgb-popup wpgb-"+t+" wpgb-show","loading"!==t&&(WPGB_Popup_Timer=setTimeout(function(){s.classList.remove("wpgb-show")},1800))):"success"!==t&&"error"!==t||(s.className="wpgb-popup")},WPGB_Query_String={get:function(e){var t={};return window.location.search.substr(1).split("&").forEach(function(e){e=e.split("="),t[decodeURIComponent(e[0])]=1<e.length?decodeURIComponent(e[1]):""}),e?t.hasOwnProperty(e)?t[e]:void 0:t},set:function(e){var t={},i=decodeURI(window.location.search);for(var s in i.substr(1).split("&").forEach(function(e){e=e.split("="),t[decodeURIComponent(e[0])]=1<e.length?decodeURIComponent(e[1]):""}),e)if(e.hasOwnProperty(s)){var n=encodeURIComponent(e[s]);if(t.hasOwnProperty(s)){var o=t[s];i=n?i.replace(s+"="+o,s+"="+n):(i=i.replace("&"+s+"="+o,"")).replace(s+"="+o,"")}else i=n?i+(i?"&":"?")+s+"="+n:i.replace(s+"=","")}var r=[location.protocol,"//",location.host,location.pathname].join("");return i=i.substr(1)?i:i.substr(1),encodeURI(r+i)}};!function(o){var e=".wpgb-settings-tabs li";WPGB_Query_String.get("tab");function t(e,t){var i=0;switch(e.keyCode){case 37:case 38:i=-1;break;case 39:case 40:i=1}i&&(e.preventDefault(),t&&function(e,t){var i=e.parentElement.children;e=1===t?(e=e.nextElementSibling)||i[0]:(e=e.previousElementSibling)||i[i.length-1];e.focus(),e.click()}(e.target,i))}function i(e){for(var t=e.parentElement.children,i=0,s=t.length;i<s;i++){var n=e===t[i],o=n?"0":"-1",r=n?"true":"false";t[i].setAttribute("tabindex",o),t[i].setAttribute("aria-selected",r)}}o(document).on("keydown",e,function(e){t(e,!1)}),o(document).on("keyup",e,function(e){t(e,!0)}),o(document).on("click",e,function(e){e.preventDefault(),"true"!==this.getAttribute("aria-selected")&&(i(this),s(this),n(this))});var s=function(e){if(e=e.parentElement.parentElement.parentElement.querySelector("#"+e.getAttribute("aria-controls"))){for(var t=e.parentElement.children,i=0,s=t.length;i<s;i++)t[i].setAttribute("hidden","");e.removeAttribute("hidden");var n=e.querySelectorAll(".CodeMirror");n.length<1||o(n).each(function(e,t){t.CodeMirror.refresh()})}},n=function(e){var t=o(e).closest(".wpgb-settings-tabs");if(!t||t[0]===o("#wpgb:not(.postbox) form .wpgb-settings-tabs").get(0)){e=e.previousElementSibling?(e=e.getAttribute("aria-controls")).replace("wpgb-","").replace("-tab",""):"";var i=WPGB_Query_String.set({tab:e});window.history.pushState({tab:e},null,i)}};if(o(e).length&&window.addEventListener("popstate",function(e){var t="";e.state&&e.state.tab&&(t=document.querySelector('[aria-controls="wpgb-'+e.state.tab+'-tab"]')),(t=t||document.querySelector(".wpgb-settings-tabs li"))&&(t.focus(),i(t),s(t))}),self.URLSearchParams){var r=window.location.pathname,a=window.location.search,l=new URLSearchParams(a.slice(1)),c=l.get("tab");if(c){var h=document.querySelector('[aria-controls="wpgb-'+c+'-tab"]');c={tab:c},h?h.focus():(c="",l.delete("tab")),window.history.replaceState(c,null,r+"?"+l.toString())}}}(jQuery),function(a){a.fn.WPGB_SerializeForm=function(){if(this.length<1)return!1;function e(){if(!this.disabled){var e=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),t=e.length-1,i=a(this);if(!i.closest('[data-field-condition][style$="none;"]').length&&e[0]){for(var s=0;s<t;s++)r=r[e[s]]=r[e[s]]||(""===e[s+1]||"0"===e[s+1]?[]:{});var n=i.val();""!==n&&!isNaN(parseFloat(n))&&isFinite(n)&&(n=Number(n)),void 0!==r.length?null!==n&&""!==n&&(Array.isArray(n)?n.forEach(function(e){""!==e&&e==Number(e)&&(e=Number(e)),r.push(e)}):r.push(n)):r[e[t]]=n,r=o}}}var o={},r=o,t=':input[type!="checkbox"][type!="radio"], input:checked';return this.filter(t).each(e),this.find(t).each(e),o}}(jQuery);