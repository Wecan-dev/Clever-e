/*!
* WP Grid Builder Plugin
*
* @package   WP Grid Builder
* @author    Loïc Blascos
* @link      https://www.wpgridbuilder.com
* @copyright 2019-2020 Loïc Blascos
*
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DOMPurify=t()}(this,function(){"use strict";var ge=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],be=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],ve=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"],ye=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],we=["#text"],_e=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],Se=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],xe=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],ke=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"];function Ee(e,t){for(var n=t.length;n--;)"string"==typeof t[n]&&(t[n]=t[n].toLowerCase()),e[t[n]]=!0;return e}function Ce(e){var t={},n=void 0;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}var Te=/\{\{[\s\S]*|[\s\S]*\}\}/gm,Le=/<%[\s\S]*|[\s\S]*%>/gm,Pe=/^data-[\-\w.\u00B7-\uFFFF]/,Ne=/^aria-[\-\w]+$/,Oe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ae=/^(?:\w+script|data):/i,Me=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ie(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var qe=function(){return"undefined"==typeof window?null:window};return function t(e){function c(e){return t(e)}var l=0<arguments.length&&void 0!==e?e:qe();if(c.version="1.0.3",c.removed=[],!l||!l.document||9!==l.document.nodeType)return c.isSupported=!1,c;var d=l.document,r=!1,o=!1,p=l.document,u=l.DocumentFragment,n=l.HTMLTemplateElement,h=l.Node,i=l.NodeFilter,a=l.NamedNodeMap,s=void 0===a?l.NamedNodeMap||l.MozNamedAttrMap:a,m=l.Text,f=l.Comment,g=l.DOMParser,b=l.XMLHttpRequest,v=void 0===b?l.XMLHttpRequest:b,y=l.encodeURI,w=void 0===y?l.encodeURI:y;if("function"==typeof n){var _=p.createElement("template");_.content&&_.content.ownerDocument&&(p=_.content.ownerDocument)}var S=p.implementation,x=p.createNodeIterator,k=p.getElementsByTagName,E=p.createDocumentFragment,C=d.importNode,T={};c.isSupported=S&&void 0!==S.createHTMLDocument&&9!==p.documentMode;function L(e){"object"!==(void 0===e?"undefined":ze(e))&&(e={}),F="ALLOWED_TAGS"in e?Ee({},e.ALLOWED_TAGS):B,j="ALLOWED_ATTR"in e?Ee({},e.ALLOWED_ATTR):H,W="FORBID_TAGS"in e?Ee({},e.FORBID_TAGS):{},G="FORBID_ATTR"in e?Ee({},e.FORBID_ATTR):{},re="USE_PROFILES"in e&&e.USE_PROFILES,U=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,V=e.ALLOW_UNKNOWN_PROTOCOLS||!1,X=e.SAFE_FOR_JQUERY||!1,$=e.SAFE_FOR_TEMPLATES||!1,J=e.WHOLE_DOCUMENT||!1,Q=e.RETURN_DOM||!1,ee=e.RETURN_DOM_FRAGMENT||!1,te=e.RETURN_DOM_IMPORT||!1,K=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,ie=!1!==e.KEEP_CONTENT,D=e.ALLOWED_URI_REGEXP||D,$&&(Y=!1),ee&&(Q=!0),re&&(F=Ee({},[].concat(Ie(we))),j=[],!0===re.html&&(Ee(F,ge),Ee(j,_e)),!0===re.svg&&(Ee(F,be),Ee(j,Se),Ee(j,ke)),!0===re.svgFilters&&(Ee(F,ve),Ee(j,Se),Ee(j,ke)),!0===re.mathMl&&(Ee(F,ye),Ee(j,xe),Ee(j,ke))),e.ADD_TAGS&&(F===B&&(F=Ce(F)),Ee(F,e.ADD_TAGS)),e.ADD_ATTR&&(j===H&&(j=Ce(j)),Ee(j,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&Ee(se,e.ADD_URI_SAFE_ATTR),ie&&(F["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(e),le=e}function P(t){c.removed.push({element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=""}}function N(e,t){try{c.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){c.removed.push({attribute:null,from:t})}t.removeAttribute(e)}function O(e){var t=void 0,n=void 0;if(K&&(e="<remove></remove>"+e),o){try{e=w(e)}catch(e){}var i=new v;i.responseType="document",i.open("GET","data:text/html;charset=utf-8,"+e,!1),i.send(null),t=i.response}if(r)try{t=(new g).parseFromString(e,"text/html")}catch(e){}return t&&t.documentElement||((n=(t=S.createHTMLDocument("")).body).parentNode.removeChild(n.parentNode.firstElementChild),n.outerHTML=e),k.call(t,J?"html":"body")[0]}var A=Te,M=Le,z=Pe,I=Ne,q=Ae,R=Me,D=Oe,F=null,B=Ee({},[].concat(Ie(ge),Ie(be),Ie(ve),Ie(ye),Ie(we))),j=null,H=Ee({},[].concat(Ie(_e),Ie(Se),Ie(xe),Ie(ke))),W=null,G=null,U=!0,Y=!0,V=!1,X=!1,$=!1,J=!1,Z=!1,K=!1,Q=!1,ee=!1,te=!1,ne=!0,ie=!0,re={},oe=Ee({},["audio","head","math","script","style","template","svg","video"]),ae=Ee({},["audio","video","img","source","image"]),se=Ee({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),le=null,ce=p.createElement("form");c.isSupported&&function(){var e=O('<svg><g onload="this.parentNode.remove()"></g></svg>');e.querySelector("svg")||(o=!0);try{(e=O('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">')).querySelector("svg img")&&(r=!0)}catch(e){}}();function de(e){return x.call(e.ownerDocument||e,e,i.SHOW_ELEMENT|i.SHOW_COMMENT|i.SHOW_TEXT,function(){return i.FILTER_ACCEPT},!1)}function pe(e){return"object"===(void 0===h?"undefined":ze(h))?e instanceof h:e&&"object"===(void 0===e?"undefined":ze(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function ue(e,t,n){T[e]&&T[e].forEach(function(e){e.call(c,t,n,le)})}function he(e){var t,n=void 0;if(ue("beforeSanitizeElements",e,null),!((t=e)instanceof m||t instanceof f||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof s&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute))return P(e),1;var i=e.nodeName.toLowerCase();if(ue("uponSanitizeElement",e,{tagName:i,allowedTags:F}),F[i]&&!W[i])return!X||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(c.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"&lt;")),$&&3===e.nodeType&&(n=(n=(n=e.textContent).replace(A," ")).replace(M," "),e.textContent!==n&&(c.removed.push({element:e.cloneNode()}),e.textContent=n)),ue("afterSanitizeElements",e,null),0;if(ie&&!oe[i]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return P(e),1}function me(e){var t=void 0,n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0;if(ue("beforeSanitizeAttributes",e,null),a=e.attributes){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j};for(s=a.length;s--;){if(n=(t=a[s]).name,i=t.value.trim(),r=n.toLowerCase(),l.attrName=r,l.attrValue=i,l.keepAttr=!0,ue("uponSanitizeAttribute",e,l),i=l.attrValue,"name"===r&&"IMG"===e.nodeName&&a.id)o=a.id,a=Array.prototype.slice.apply(a),N("id",e),N(n,e),a.indexOf(o)>s&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===r&&"file"===i&&(j[r]||!G[r]))continue;"id"===n&&e.setAttribute(n,""),N(n,e)}if(l.keepAttr&&(!ne||"id"!==r&&"name"!==r||!(i in p||i in ce))){if($&&(i=(i=i.replace(A," ")).replace(M," ")),!(Y&&z.test(r)||U&&I.test(r))){if(!j[r]||G[r])continue;if(!se[r]&&!D.test(i.replace(R,""))&&("src"!==r&&"xlink:href"!==r||0!==i.indexOf("data:")||!ae[e.nodeName.toLowerCase()])&&(!V||q.test(i.replace(R,"")))&&i)continue}try{e.setAttribute(n,i),c.removed.pop()}catch(e){}}}ue("afterSanitizeAttributes",e,null)}}function fe(e){var t=void 0,n=de(e);for(ue("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)ue("uponSanitizeShadowNode",t,null),he(t)||(t.content instanceof u&&fe(t.content),me(t));ue("afterSanitizeShadowDOM",e,null)}return c.sanitize=function(e,t){var n=void 0,i=void 0,r=void 0,o=void 0,a=void 0;if("string"!=typeof(e=e||"\x3c!--\x3e")&&!pe(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!c.isSupported){if("object"===ze(l.toStaticHTML)||"function"==typeof l.toStaticHTML){if("string"==typeof e)return l.toStaticHTML(e);if(pe(e))return l.toStaticHTML(e.outerHTML)}return e}if(Z||L(t),c.removed=[],e instanceof h)1===(i=(n=O("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName?n=i:n.appendChild(i);else{if(!Q&&!J&&-1===e.indexOf("<"))return e;if(!(n=O(e)))return Q?null:""}K&&P(n.firstChild);for(var s=de(n);r=s.nextNode();)3===r.nodeType&&r===o||he(r)||(r.content instanceof u&&fe(r.content),me(r),o=r);if(Q){if(ee)for(a=E.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return te&&(a=C.call(d,a,!0)),a}return J?n.outerHTML:n.innerHTML},c.setConfig=function(e){L(e),Z=!0},c.clearConfig=function(){le=null,Z=!1},c.addHook=function(e,t){"function"==typeof t&&(T[e]=T[e]||[],T[e].push(t))},c.removeHook=function(e){T[e]&&T[e].pop()},c.removeHooks=function(e){T[e]&&(T[e]=[])},c.removeAllHooks=function(){T={}},c}()}),function(){var e,r;!function(){"use strict";function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),e=window,r=0,e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame,e.requestAnimationFrame||(e.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-r)),i=setTimeout(e,n);return r=t+n,i}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)});var f={},t=window.console,n=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0;n<t.length;n++){var i=t[n]+"MatchesSelector";if(e[i])return i}}();function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(n=e,!(null!=(i=t)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i))throw new TypeError("Cannot call a class as a function");var n,i}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}f.error=function(e){void 0!==t&&t.error(e)},f.docReady=function(e){var t=document.readyState;"complete"===t||"interactive"===t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},f.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<n){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}return!1},f.matchesSelector=function(e,t){return e[n](t)},f.getParent=function(e,t){for(;e&&e!=document.body;){if(e.classList&&f.matchesSelector(e,t))return e;e=e.parentNode}},f.extend=function(e,t){if("object"!=typeof e)this.error("Args to extend must be an object");else for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return e},f.merge=function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},f.modulo=function(e,t){return(e+t%e)%e},f.clone=function(e){var t;if("[object Array]"===Object.prototype.toString.call(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=f.clone(e[n]);return t}if("object"!=typeof e)return e;for(var r in t={},e)e.hasOwnProperty(r)&&(t[r]=f.clone(e[r]));return t},f.removeChildren=function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)},f.detectPointers=function(){return navigator.pointerEnabled?{down:["pointerdown"],move:["pointermove"],up:["pointerup","pointercancel"]}:navigator.msPointerEnabled?{down:["MSPointerDown"],move:["MSPointerMove"],up:["MSPointerUp","MSPointerCancel"]}:{down:["mousedown","touchstart"],move:["mousemove","touchmove"],up:["mouseup","mouseleave","touchend","touchcancel"]}},f.Transitionend=function(){var e=document.createElement("div"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return e=null,t[n]},f.handleEvent=function(t,n,e,i,r){t.eventListeners||(t.eventListeners={}),t.eventListeners[i]||(t.eventListeners[i]=t[i].bind(t)),r=(r=void 0===r||!!r)?"addEventListener":"removeEventListener",e.forEach(function(e){n[r](e,t.eventListeners[i],!1)})},f.dispatchEvent=function(e,t,n){var i=new CustomEvent(t,{detail:n});e.dispatchEvent(i)},f.dispatchHTMLEvent=function(e,t){var n;document.createEvent?((n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(n)):((n=document.createEventObject()).eventType=t,e.fireEvent("on"+n.eventType,n))},f.throttle=function(n,i){function r(){c=Date.now(),l=null,s=n.apply(o,a),l||(o=a=null)}var o,a,s,l=null,c=0;return function(){var e=Date.now(),t=i-(e-c);return o=this,a=arguments,t<=0||i<t?(l&&(clearTimeout(l),l=null),c=e,s=n.apply(o,a),l||(o=a=null)):l=l||setTimeout(r,t),s}};function d(){}var p,u=function(){function e(){o(this,e),this.listeners=new Map}var t,n,i;return t=e,(n=[{key:"canListen",value:function(e,t){return!("function"!=typeof t||!e)||(!("object"!==s(t)||!t[e])||(console.error('Invalid listener for event name: "'.concat(e,'"')),!1))}},{key:"exists",value:function(e,t){if(this.listeners.has(e))return this.listeners.get(e).find(function(e){return e.listener===t})}},{key:"on",value:function(e,t,n){var i=2<arguments.length&&void 0!==n&&n;return this.canListen(e,t)?(this.listeners.has(e)||this.listeners.set(e,[]),this.exists(e,t)||this.listeners.get(e).push({listener:t,once:i}),this):this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=this.listeners.get(e)||[],i=n.findIndex(function(e){return e.listener===t});return-1<i&&n.splice(i,1),n.length<1&&this.listeners.delete(e),this}},{key:"offAll",value:function(){return this.listeners.clear(),this}},{key:"emit",value:function(i){for(var r=this,e=arguments.length,o=new Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return a(this.listeners.get(i)||[]).forEach(function(e){var t,n;(e.once&&r.off(i,e.listener),"object"===s(e.listener))?(t=e.listener[i]).apply.apply(t,[e.listener].concat(o)):(n=e.listener).apply.apply(n,[r].concat(o))}),this}}])&&c(t.prototype,n),i&&c(t,i),e}(),h=/\\?(.?)/gi;d.prototype.getFormat=function(e){return p=new Date,e.replace(h,b)};function m(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function g(){}var b=function(e,t){return v[e]?v[e]():t},v={d:function(){return m(v.j(),2)},D:function(){return wpgb_date_L10n.dayNamesShort[v.w()]},j:function(){return p.getDate()},l:function(){return wpgb_date_L10n.dayNames[v.w()]},N:function(){return v.w()||7},S:function(){var e=v.j(),t=e%10;return t<=3&&1===parseInt(e%100/10,10)&&(t=0),["st","nd","rd"][t-1]||"th"},w:function(){return p.getDay()},z:function(){var e=new Date(v.Y(),v.n()-1,v.j()),t=new Date(v.Y(),0,1);return Math.round((e-t)/864e5)},W:function(){var e=new Date(v.Y(),v.n()-1,v.j()-v.N()+3),t=new Date(e.getFullYear(),0,4);return m(1+Math.round((e-t)/864e5/7),2)},F:function(){return wpgb_date_L10n.monthNames[v.n()-1]},m:function(){return m(v.n(),2)},M:function(){return wpgb_date_L10n.monthNamesShort[v.n()-1]},n:function(){return p.getMonth()+1},t:function(){return new Date(v.Y(),v.n(),0).getDate()},L:function(){var e=v.Y();return e%4==0&e%100!=0|e%400==0},o:function(){var e=v.n(),t=v.W();return v.Y()+(12===e&&t<9?1:1===e&&9<t?-1:0)},Y:function(){return p.getFullYear()},y:function(){return v.Y().toString().slice(-2)},a:function(){return 11<p.getHours()?"pm":"am"},A:function(){return v.a().toUpperCase()},B:function(){var e=3600*p.getUTCHours(),t=60*p.getUTCMinutes(),n=p.getUTCSeconds();return m(Math.floor((e+t+n+3600)/86.4)%1e3,3)},g:function(){return v.G()%12||12},G:function(){return p.getHours()},h:function(){return m(v.g(),2)},H:function(){return m(v.G(),2)},i:function(){return m(p.getMinutes(),2)},s:function(){return m(p.getSeconds(),2)},u:function(){return m(1e3*p.getMilliseconds(),6)},v:function(){return m(p.getMilliseconds(),3)},e:function(){return wpgb_date_L10n.timezone},I:function(){return new Date(v.Y(),0)-Date.UTC(v.Y(),0)!=new Date(v.Y(),6)-Date.UTC(v.Y(),6)?1:0},O:function(){var e=p.getTimezoneOffset(),t=Math.abs(e);return(0<e?"-":"+")+m(100*Math.floor(t/60)+t%60,4)},P:function(){var e=v.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return wpgb_date_L10n.timezone_abbr},Z:function(){return 60*-p.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(h,b)},r:function(){return"D, d M Y H:i:s O".replace(h,b)},U:function(){return p/1e3|0}};g.prototype.render=function(e){var r;return e.forEach(function(e,t){if(null!==e)if(t||"string"!=typeof e)if(t&&"string"==typeof e)if(r.firstChild){var n=document.createTextNode(e);r.appendChild(n)}else r.textContent=e;else if(r&&Array.isArray(e)){var i=this.render(e);i&&r.appendChild(i)}else r&&"object"==typeof e&&this.renderAtts(r,e);else r=-1<["svg","use"].indexOf(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}.bind(this)),r},g.prototype.renderAtts=function(p,u){Object.keys(u).forEach(function(e){var t=u[e],n=e in p,i="readonly"===e,r="for"===e,o="type"===e,a="class"===e,s="xlink:href"===e,l="role"===e||-1<e.indexOf("data-"),c=-1<e.indexOf("aria-"),d="tabindex"===e;n||i||r||o||a||l||c||s||d?"style"===e?this.renderStyles(p,t):a?p.className=t:i||r||o||l||c||d?"data-wpgb"===e?p.wpgb=t:p.setAttribute(e,t):n?p[e]=t:s&&p.setAttributeNS("http://www.w3.org/1999/xlink",e,t):console.warn(e+" is not a valid property")}.bind(this))},g.prototype.renderStyles=function(t,n){n&&Object.keys(n).forEach(function(e){e in t.style?t.style[e]=n[e]:console.warn(e+" is not a valid style for a <"+t.tagName.toLowerCase()+">")})};function y(e,t){this.canvas=document.querySelector(e),this.layout=t||"horizontal",this.marker=this.canvas.nextElementSibling,this.ruler=document.querySelector(".wpgb-builder-right-panel"),this.bindEvents(),this.getBound(),this.draw()}y.prototype.bindEvents=function(){this.ruler.addEventListener("mouseenter",this.getBound.bind(this)),this.ruler.addEventListener("mousemove",this.move.bind(this)),window.addEventListener("scroll",this.getBound.bind(this),!1),window.addEventListener("resize",this.getBound.bind(this))},y.prototype.getBound=function(){this.bound=this.canvas.parentElement.getBoundingClientRect()},y.prototype.move=function(e){if(this.position={x:e.clientX,y:e.clientY},"horizontal"===this.layout){var t=2*Math.round((this.position.x-this.bound.left)/2);this.marker.style.transform="translate("+t+"px, 0)",this.marker.setAttribute("data-position",t)}else{var n=2*Math.round((this.position.y-this.bound.top)/2);this.marker.style.transform="translate(0,"+n+"px)",this.marker.setAttribute("data-position",n)}},y.prototype.draw=function(){this.ctx=this.canvas.getContext("2d"),this.size={width:this.canvas.width,height:this.canvas.height},this.set_HDPI(),this.draw_ruler(),this.draw_origin(),this.marker.setAttribute("data-position",0)},y.prototype.set_HDPI=function(){var e=window.devicePixelRatio||1,t=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1;if(e!==t){var n=e/t,i=this.canvas.width,r=this.canvas.height;this.canvas.width=i*n,this.canvas.height=r*n,this.canvas.style.width=i+"px",this.canvas.style.height=r+"px",this.ctx.scale(n,n)}},y.prototype.draw_ruler=function(){this.draw_line(0,100,20,"#96a4b4"),this.draw_line(0,20,12,"rgba(147, 154, 170, 1)"),this.draw_line(10,20,8,"rgba(147, 154, 170, 0.7)")},y.prototype.draw_origin=function(){this.ctx.beginPath(),"horizontal"===this.layout?(this.ctx.moveTo(2500,0),this.ctx.lineTo(2500,50)):(this.ctx.moveTo(0,2500),this.ctx.lineTo(50,2500)),this.ctx.strokeStyle="#f85464",this.ctx.stroke()},y.prototype.draw_line=function(e,t,n,i){var r=Math.round(this.size["horizontal"===this.layout?"width":"height"]/t);this.ctx.beginPath();for(var o=0;o<r;o++)20===t&&0===e&&o%5==0||100===t&&25===o||("horizontal"===this.layout?(this.ctx.moveTo(e+o*t,50),this.ctx.lineTo(e+o*t,50-n)):(this.ctx.moveTo(50-n,e+o*t),this.ctx.lineTo(50,e+o*t)));this.ctx.strokeStyle=i,this.ctx.stroke()};function w(){this.icons=document.querySelectorAll(".wpgb-icons-popup-wrapper span"),this.length=this.icons.length,document.querySelector(".wpgb-icons-popup input").addEventListener("input",this),document.querySelector(".wpgb-icons-popup").addEventListener("click",this),document.addEventListener("click",this.open.bind(this)),window.addEventListener("resize",this.open.bind(this))}w.prototype.handleEvent=function(e){e.preventDefault(),e.stopPropagation();var t="on"+e.type;this[t]&&this[t](e)},w.prototype.open=function(e){var t=f.getParent(e.target,".wpgb-icon-picker"),n=document.querySelector(".wpgb-icons-popup");if(t){this.picker=t,this.input=t.lastElementChild;var i=document.querySelector(".wpgb-icons-popup .wpgb-icon-selected"),r=t.parentElement.getBoundingClientRect(),o=window.innerWidth;if(i&&i.classList.remove("wpgb-icon-selected"),o<=1280){var a=n.parentElement.getBoundingClientRect();n.style.top=r.top-a.top+"px",n.style.left=r.left-a.left+"px",n.style.position="absolute"}else n.style.top=r.top+"px",n.style.left=r.left+"px",n.style.position="";n.style.width=t.parentElement.clientWidth+"px",(d=this.getScrollParent(this.picker))&&d.classList.add("wpgb-disable-scroll"),n.classList.toggle("wpgb-show"),t.classList.toggle("wpgb-open"),n.firstElementChild.focus(),this.selectIcon()}else{for(var s=document.querySelectorAll(".wpgb-icon-picker.wpgb-open"),l=0,c=s.length;l<c;l++){var d;(d=this.getScrollParent(this.picker))&&d.classList.remove("wpgb-disable-scroll"),s[l].classList.remove("wpgb-open")}n.classList.remove("wpgb-show")}},w.prototype.getScrollParent=function(e){for(var t=e.parentElement;t!==document.body;){var n=getComputedStyle(t,null),i=n.getPropertyValue("overflow");if(i+=n.getPropertyValue("overflow-y"),/(auto|scroll)/.test(i))return t;t=t.parentElement}},w.prototype.oninput=function(e){for(var t=e.target.value,n=0;n<this.length;n++){var i=this.icons[n],r=i.getAttribute("data-icon")||"";i.style.display=-1<r.indexOf(t)?"":"none"}},w.prototype.onclick=function(e){var t=f.getParent(e.target,".wpgb-icon-item");if(t){var n=this.picker.firstElementChild,i=n.firstElementChild,r=t.getAttribute("data-icon");i&&n.removeChild(i),n.appendChild(t.firstElementChild.cloneNode(!0)),document.querySelector(".wpgb-icons-popup").classList.remove("wpgb-show"),this.picker.classList.remove("wpgb-open"),this.input.value=r,f.dispatchHTMLEvent(this.input,"change")}},w.prototype.selectIcon=function(){var e=document.querySelector('.wpgb-icons-popup [data-icon="'+this.input.value+'"]');e&&(e.parentNode.parentNode.scrollTop=0,e.parentNode.parentNode.scrollTop=e.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top,e.classList.add("wpgb-icon-selected"))};function _(e,i){var t;function r(e){t=requestAnimationFrame(e)}function o(){t&&(cancelAnimationFrame(t),t=null)}i=i||300;var a=function(){var e,t=d-c,n=Date.now()-l;if(s.scrollTop=(e=n,-t*(e/=i)*(e-2)+c),i<=n)return s.scrollTop=d,o();r(a)},s=function(e){for(var t=e.parentElement;t;){var n=getComputedStyle(t,null),i=n.getPropertyValue("overflow");if(i+=n.getPropertyValue("overflow-y"),/(auto|scroll)/.test(i))return t;t=t.parentElement}}(e);if(s){var l=Date.now(),c=s.scrollTop,d=e.offsetTop;d!==c&&(o(),r(a))}}function S(e){e.wpgb_resizable||(this.element=e,this.element.wpgb_resizable=1,this.pointers=f.detectPointers(),this.transitionend=f.Transitionend(),this.create(),f.handleEvent(this,this.element,this.pointers.down,"pointerDown"))}S.prototype.create=function(){this.resizer=document.createElement("div");var n=document.createDocumentFragment();["n","s","e","w","ne","se","sw","nw"].forEach(function(e){var t=document.createElement("div");t.className="wpgb-resize",t.setAttribute("data-resize",e),n.appendChild(t)}.bind(this)),this.resizer.className="wpgb-resizer",this.resizer.appendChild(n),this.element.appendChild(this.resizer)},S.prototype.mapPoint=function(e){var t=e.touches?e.changedTouches:[e];return t[0]?t[0]:{}},S.prototype.pointerDown=function(e){if(!this.resizing){var t=this.mapPoint(e);this.pointer={x:Math.round(t.pageX),y:Math.round(t.pageY)},this.sizer={height:this.element.clientHeight,width:this.element.clientWidth,direction:e.target.getAttribute("data-resize")},this.sizer.direction&&(f.handleEvent(this,window,this.pointers.move,"pointerMove"),f.handleEvent(this,window,this.pointers.up,"pointerUp"))}},S.prototype.pointerMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.mapPoint(e);if(this.delta={x:Math.round(t.pageX)-this.pointer.x,y:Math.round(t.pageY)-this.pointer.y},!(!this.resizing&&Math.abs(this.delta.x)<3&&Math.abs(this.delta.y)<3)){if(!this.resizing)return this.resizing=!0,this.pointer.x+=this.delta.x,this.pointer.y+=this.delta.y,void f.dispatchEvent(window,"wpgb_builder.resize_start",n);document.body.classList.add("wpgb-resizing"),this.element.classList.add("wpgb-resized");var n={element:this.element,height:"",width:""};if(-1<["n","s","ne","se","sw","nw"].indexOf(this.sizer.direction)){var i=-1<["n","ne","nw"].indexOf(this.sizer.direction)?-1:1;n.height=Math.max(4,this.sizer.height+this.delta.y*i),this.element.style.height=n.height+"px"}if(-1<["e","w","ne","se","sw","nw"].indexOf(this.sizer.direction)){i=-1<["w","sw","nw"].indexOf(this.sizer.direction)?-1:1;n.width=Math.max(4,this.sizer.width+this.delta.x*i),this.element.style.width=n.width+"px"}this.element.style.pointerEvents="none",f.dispatchEvent(window,"wpgb_builder.resize_move",n)}},S.prototype.pointerUp=function(e){f.handleEvent(this,window,this.pointers.move,"pointerMove",!1),f.handleEvent(this,window,this.pointers.up,"pointerUp",!1),this.resizing&&f.dispatchEvent(window,"wpgb_builder.resize_end",{element:this.element}),document.body.classList.remove("wpgb-resizing"),this.element.classList.remove("wpgb-resized"),this.resizing=this.delta=!1};function k(e){this.pointers=f.detectPointers(),this.transitionend=f.Transitionend(),this.options=e?f.extend(e,E):E,this.computed={},this.snapTo=this.options.snapTo?document.querySelector(this.options.snapTo):null,f.handleEvent(this,document,this.pointers.down,"pointerDown"),document.querySelector('[name="wpgb-snap-to-grid"]').addEventListener("click",this.snapToGrid.bind(this),!0)}var E={handle:".wpgb-block",drop:".wpgb-droppable",cancel:".wpgb-resize",snapTo:".wpgb-card",classes:{dragged:"wpgb-dragged",placeholder:"wpgb-placeholder"}};k.prototype.mapPoint=function(e){var t=e.touches?e.changedTouches:[e];return t[0]?t[0]:{}},k.prototype.pointerDown=function(e){if(3!==e.which&&!this.sorting&&!f.getParent(e.target,this.options.cancel)&&!document.querySelector(".wpgb-preview")&&(this.draggable=f.getParent(e.target,this.options.handle),this.droppable=f.getParent(e.target,this.options.drop),this.draggable)){var t=this.mapPoint(e);this.pointer={x:Math.round(t.clientX),y:Math.round(t.clientY)},f.handleEvent(this,window,this.pointers.move,"pointerMove"),f.handleEvent(this,window,this.pointers.up,"pointerUp")}},k.prototype.pointerMove=function(e){var t=this.mapPoint(e),n=f.getParent(e.target,this.options.drop);this.droppable=n||this.droppable,this.delta={x:Math.round(t.clientX)-this.pointer.x,y:Math.round(t.clientY)-this.pointer.y},this.sorting?(e.preventDefault(),e.stopPropagation(),this.moveDraggedItem(),this.sortItems(t)):(5<Math.abs(this.delta.x)||5<Math.abs(this.delta.y))&&(this.pointer.x+=this.delta.x,this.pointer.y+=this.delta.y,this.sorting=!0,this.addDraggedItem(),this.pointerMove(e),document.body.classList.add("wpgb-dragging"),f.dispatchEvent(window,"wpgb_builder.sort_start",{element:this.draggable,droppable:this.droppable}))},k.prototype.pointerUp=function(e){f.handleEvent(this,window,this.pointers.move,"pointerMove",!1),f.handleEvent(this,window,this.pointers.up,"pointerUp",!1),this.sorting&&(V=!0,f.dispatchEvent(window,"wpgb_builder.sort_end",{element:this.draggable,droppable:this.droppable})),"absolute"!==this.computed.position&&this.draggedItem&&(this.delta.x||this.delta.y)?(V=!0,this.revertItem()):this.revertEnd()},k.prototype.revertItem=function(){var e=this.draggable.getBoundingClientRect(),t=this.getScrollOffset();f.handleEvent(this,this.draggedItem,[this.transitionend],"revertEnd"),this.draggable.classList.remove(this.options.classes.placeholder),this.draggedItem.style.transition="transform 0.3s",this.draggedItem.style.transform="translate3d("+(t.left+e.left)+"px,"+(t.top+e.top)+"px,0)",this.draggable.classList.add(this.options.classes.placeholder)},k.prototype.revertEnd=function(){document.body.classList.remove("wpgb-dragging"),this.draggable.classList.remove(this.options.classes.placeholder),this.removeDraggedItem(),this.sorting=!1},k.prototype.addDraggedItem=function(){this.initial=this.draggable.getBoundingClientRect(),this.computed=this.getComputedStyle(this.draggable),this.draggedItem=this.draggable.cloneNode(!0),this.draggedItem.style.width=this.initial.width+"px",this.draggedItem.style.height=this.initial.height+"px",this.draggedItem.style.padding=this.computed.padding,this.draggedItem.style.fontSize=this.computed.fontSize,this.draggedItem.style.lineHeight=this.computed.lineHeight,this.draggedItem.style.color=this.computed.color,this.draggedItem.classList.add(this.options.classes.dragged),this.draggable.classList.add(this.options.classes.placeholder),document.body.appendChild(this.draggedItem)},k.prototype.removeDraggedItem=function(){this.draggedItem&&(f.handleEvent(this,this.draggedItem,[this.transitionend],"revertEnd",!1),this.draggedItem=this.draggedItem.parentNode.removeChild(this.draggedItem),this.draggedItem=null)},k.prototype.moveDraggedItem=function(){var e=this.options.grid,t=this.getScrollOffset(),n=(this.snapTo?this.snapTo:this.droppable.parentElement).getBoundingClientRect(),i={x:this.initial.left+this.delta.x,y:this.initial.top+this.delta.y};if(e&&"absolute"===this.computed.position){var r=e&&e[0],o=e&&e[1],a=r?(n.left/r-Math.round(n.left/r))*r:0,s=o?(n.top/o-Math.round(n.top/o))*o:0;i.x=r?a+Math.round(i.x/r)*r:i.x,i.y=o?s+Math.round(i.y/o)*o:i.y}i.x+=t.left,i.y+=t.top,this.draggedItem.style.transform="translate3d("+i.x+"px,"+i.y+"px,0)",this.moveDraggable(t,i)},k.prototype.moveDraggable=function(e,t){if("absolute"===this.computed.position){var n=this.droppable.parentElement.getBoundingClientRect(),i=window.getComputedStyle(this.droppable.parentElement),r=window.getComputedStyle(this.draggable);t.x=t.x-(n.left+e.left+parseInt(r.marginLeft,10)+parseInt(i.borderLeftWidth,10)),t.y=t.y-(n.top+e.top+parseInt(r.marginTop,10)+parseInt(i.borderTopWidth,10)),t.element=this.draggable,this.draggable.style.left=t.x+"px",this.draggable.style.top=t.y+"px",f.dispatchEvent(window,"wpgb_builder.sort_move",t)}},k.prototype.sortItems=function(e){var t=this.droppable.children,n=this.getScrollOffset(),i=!1,r={},o=n.left+Math.round(e.clientX),a=n.top+Math.round(e.clientY);if(t.length){if("absolute"!==this.computed.position)for(var s=0,l=t.length;s<l;s++)if(t[s]!==this.draggable){if("absolute"!==(r=this.getComputedStyle(t[s])).position&&r.left<o&&r.right>o&&r.top<a&&r.bottom>a){var c=a<r.top+(r.bottom-r.top)/2;"inline-block"===r.display&&"inline-block"===this.computed.display&&(c=o<r.left+(r.right-r.left)/2);var d=c?t[s]:t[s].nextSibling;if((c?t[s].previousSibling:t[s].nextSibling)===this.draggable)return;return void this.droppable.insertBefore(this.draggable,d)}}else i=!0;else if(!this.droppable.contains(this.draggable))return void this.droppable.appendChild(this.draggable);!i&&a<r.bottom?this.droppable.insertBefore(this.draggable,this.droppable.firstElementChild):!i&&a>r.bottom&&this.droppable.appendChild(this.draggable)}else this.droppable.appendChild(this.draggable)},k.prototype.getScrollOffset=function(){return{left:window.pageXOffset,top:window.pageYOffset}},k.prototype.getComputedStyle=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e),i=this.getScrollOffset(),r=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),o=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),a=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),s=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10),l=parseInt(n.marginLeft,10)+parseInt(n.borderLeftWidth,10),c=parseInt(n.marginTop,10)+parseInt(n.borderTopWidth,10),d=t.right-t.left+r+a,p=t.bottom-t.top+o+s;return"block"===n.display&&(d=e.parentElement.clientWidth),{position:n.getPropertyValue("position"),display:n.getPropertyValue("display"),top:i.top+t.top-c,right:i.left+t.left-l+d,bottom:i.top+t.top-c+p,left:i.left+t.left-l,fontSize:n.getPropertyValue("font-size"),lineHeight:n.getPropertyValue("line-height"),padding:n.getPropertyValue("padding"),color:n.getPropertyValue("color")}},k.prototype.snapToGrid=function(e){var t=e.target.checked;document.querySelector(".wpgb-builder-grid").style.display=t?"block":"none",this.options.grid=t?[10,10]:""};function C(){this.pointers=f.detectPointers(),f.handleEvent(this,document,this.pointers.down,"pointerDown")}C.prototype.mapPoint=function(e){var t=e.touches?e.changedTouches:[e];return t[0]?t[0]:{}},C.prototype.pointerDown=function(e){var t=f.getParent(e.target,".wpgb-handle-resize");if((t=t||f.getParent(e.target,".wpgb-panel-title"))&&!f.getParent(e.target,".wpgb-panel-close")){this.element=t.parentNode,this.method=t.classList.contains("wpgb-handle-resize")?"resize":"drag";var n=this.element.getBoundingClientRect(),i=window.getComputedStyle(this.element);this.size={top:n.top+window.pageYOffset,left:n.left+window.pageXOffset,height:parseInt(i.getPropertyValue("height"),10),width:parseInt(i.getPropertyValue("width"),10),window:{width:window.innerWidth,height:window.innerHeight}},document.body.classList.add("wpgb-dragging"),f.handleEvent(this,window,this.pointers.move,"pointerMove"),f.handleEvent(this,window,this.pointers.up,"pointerUp");var r=this.mapPoint(e);this.pointer={x:Math.round(r.clientX),y:Math.round(r.clientY)},document.body.click()}},C.prototype.pointerMove=function(e){e.preventDefault(),e.stopPropagation();var t=this.mapPoint(e);if(this.delta={x:Math.round(t.clientX)-this.pointer.x,y:Math.round(t.clientY)-this.pointer.y},"resize"===this.method)this.element.style.height=this.size.height+this.delta.y+"px",this.element.style.width=this.size.width+this.delta.x+"px";else if(5<Math.abs(this.delta.x)||5<Math.abs(this.delta.y)){var n=this.size.top+this.delta.y-window.pageYOffset,i=this.size.left+this.delta.x-window.pageXOffset;this.element.style.top=Math.min(this.size.window.height-100,Math.max(32,n))+"px",this.element.style.left=Math.min(this.size.window.width-this.size.width,Math.max(0,i))+"px"}},C.prototype.pointerUp=function(e){document.cookie="wpgb_panel_size="+this.element.clientWidth+","+this.element.clientHeight+","+parseInt(this.element.style.top)+","+parseInt(this.element.style.left),f.handleEvent(this,window,this.pointers.move,"pointerMove",!1),f.handleEvent(this,window,this.pointers.up,"pointerUp",!1),document.body.classList.remove("wpgb-dragging")};function T(){Object.keys(G).forEach(function(e){O["'"+e+"'"]=e})}var L,P,N,O=[],A={text:function(e){return(e=f.extend(e,{ID:"text",value:"",placeholder:""})).angle_quotes&&(e.value=e.value.replace(/&lt;/g,"<")),["input",{type:"text",class:"wpgb-input wpgb-text",id:e.uid,name:e.id,value:e.value,placeholder:e.placeholder,autocomplete:"off"}]},url:function(e){return A.text(e)},number:function(e){return["input",{type:"number",class:"wpgb-input wpgb-number",id:(e=f.extend(e,{ID:"number",value:"",min:0,max:"9999",step:1})).uid,name:e.id,value:e.value,min:e.min,max:e.max,step:e.step}]},text_number:function(e){return["input",{type:"text",class:"wpgb-input wpgb-text-number",id:(e=f.extend(e,{ID:"text-number",value:"",min:0,max:9999,step:1,steps:[],units:[],tooltip:""})).uid,name:e.id,value:e.value,"aria-label":e.tooltip,"data-min":e.min,"data-max":e.max,"data-steps":JSON.stringify(e.steps),"data-units":JSON.stringify(e.units),autocomplete:"off"}]},code:function(e){return["textarea",{class:"wpgb-code",id:(e=f.extend(e,{ID:"code",value:"",mode:"javascript",height:"204",placeholder:""})).uid,name:e.id,rows:"5",cols:"25",placeholder:e.placeholder,"data-mode":e.mode,"data-height":e.height,value:e.value}]},slider:function(e){e=f.extend(e,{ID:"slider",value:0,min:0,max:100,step:1,steps:[],units:[]});var t=parseFloat(e.value||0),n=100*(t-e.min)/(e.max-e.min)+.5;return n=(""!==e.value?Math.min(100,wpgb_L10n.RTL?100-n:n):0)+"% 100%",["div",{class:"wpgb-range"},["input",{type:"range",class:"wpgb-input wpgb-range-slider",id:e.uid,style:{"background-size":n},min:e.min,max:e.max,step:.001,"data-steps":JSON.stringify(e.steps),"data-units":JSON.stringify(e.units),value:t}],["input",{type:"text",class:"wpgb-input wpgb-range-slider-value",name:e.id,value:e.value,"aria-label":e.label,autocomplete:"off"}]]},toggle:function(e){return["div",{class:"wpgb-toggle"},["input",{type:"checkbox",class:"wpgb-input wpgb-checkbox",id:(e=f.extend(e,{ID:"switch",value:0})).uid,name:e.id,value:1,checked:e.value}],["span"]]},file:function(e){return["div",{class:"wpgb-upload-file"},["input",{type:"text",id:(e=f.extend(e,{ID:"file",label:"upload",value:0,placeholder:"",mime_type:"image"})).uid,name:e.id,value:e.value,placeholder:e.placeholder,autocomplete:"off"}],["button",{class:"wpgb-button wpgb-button-small wpgb-upload-media",type:"button","data-mime-type":e.mime_type},U.L10n.labels.file_uploader]]},color:function(e){return["div",{class:"wpgb-color","data-gradient":(e=f.extend(e,{ID:"color",value:"",gradient:"",alpha:!1,label:"Select Color",clear:"Clear"})).gradient,"data-alpha":e.alpha},["div",{class:"wpgb-color-picker"},["input",{class:"wpgb-input wpgb-color-picker-input",id:e.uid,name:e.id,value:e.value,readonly:!0}],["span",{class:"wpgb-color-picker-preview",style:{background:e.value}}],["span",{class:"wpgb-color-picker-text"},U.L10n.labels.color_picker]],["div",{class:"wpgb-color-clear"},e.clear]]},font_family:function(e){return e.options["Google Fonts"]=O,L=e.value,e},font_weight:function(t){var e=G[L.replace(/'/g,"")],n=e?e.variants:null;return n&&Object.keys(t.options).forEach(function(e){n.indexOf(e)<0&&"400"!==e&&delete t.options[e]}),t},radio:function(e){var t;if((e=f.extend(e,{ID:"radio",value:"",options:{},icons:{},style:""})).options){for(var n in t="list"===e.style?["ul",{class:"wpgb-radio-list wpgb-list"}]:["div",{class:"wpgb-radio-list"}],e.options)if(e.options.hasOwnProperty(n)){var i="wpgb-"+Math.random().toString(36).substr(2,9),r=e.value===n||null,o=e.icons&&e.icons[n]?T.prototype.buildSVGIcon(e.icons[n]):"";t.push(["list"===e.style?"li":"span",{class:"list"===e.style?"wpgb-list-item":"wpgb-radio-item"},["input",{type:"radio",class:"wpgb-input wpgb-radio wpgb-sr-only",id:i,name:e.id,value:n,checked:r}],["label",{for:i},o,["span",e.options[n]]]])}return t}},checkbox:function(e){if((e=f.extend(e,{ID:"checkbox",value:"",options:{},icons:{}})).options){var t=["ul",{class:"wpgb-checkbox-list"}],n=Object.keys(e.options).length;for(var i in e.options)if(e.options.hasOwnProperty(i)){var r="wpgb-"+Math.random().toString(36).substr(2,9),o=e.value===i||null,a=e.icons&&e.icons[i]?T.prototype.buildSVGIcon(e.icons[i]):"",s=[1===n?"div":"li",{class:"wpgb-checkbox-item"},["input",{type:"checkbox",class:"wpgb-input wpgb-checkbox wpgb-sr-only",id:r,name:e.id,value:i,checked:o}],["label",{for:r},a?"":e.options[i],a]];1===n?t=s:t.push(s)}return t}},select:function(e){var t=["select",{class:"wpgb-select",id:(e=f.extend(e,{ID:"select",value:"",options:{},multiple:"",placeholder:"",search:"",async:"",validate:!1})).uid,name:e.id,"data-search":e.search,"data-async":e.async,multiple:e.multiple}];if("font-weight"===e.id&&(e=A.font_weight(e)),"font-family"===e.id&&(e=A.font_family(e)),e.options){for(var n in e.placeholder&&t.push(["option",{value:""},e.placeholder]),e.async&&e.value&&!e.options.hasOwnProperty(e.value)&&(e.options[e.value]=e.value),e.options)if(e.options.hasOwnProperty(n)){var i=!!(e.multiple&&-1<e.value.indexOf(n)||e.value===n)||null;if(Array.isArray(e.options[n])||"object"==typeof e.options[n]){var r=["optgroup",{label:n}];for(var o in e.options[n])e.options[n].hasOwnProperty(o)&&(i=!!(e.multiple&&-1<e.value.indexOf(o)||e.value===o)||null,r.push(["option",{value:o,selected:i},e.options[n][o]]));t.push(r)}else t.push(["option",{value:n,selected:i},e.options[n]])}return t}},icons:function(e){return e=f.extend(e,{ID:"icon",value:"",label:"Select Icon"}),["div",{class:"wpgb-icon"},["div",{class:"wpgb-icon-picker"},["span",{class:"wpgb-icon-picker-svg"}],["span",{class:"wpgb-icon-picker-label"},U.L10n.labels.icon_picker],["input",{type:"hidden",class:"wpgb-input",name:e.id,value:e.value}]]]},notabene:function(e){return e=f.extend(e,{value:""}),["p",{class:"wpgb-nota-bene"},T.prototype.buildSVGIcon(U.icons.info),e.value]},group:function(e){for(var t=["div",{class:"wpgb-field-group wpgb-group-"+e.id}],n=0;n<e.fields.length;n++){var i={class:"wpgb-settings-sub-field wpgb-field-"+e.fields[n].id};e.fields[n].conditional_logic&&(i["data-field-condition"]=JSON.stringify(e.fields[n].conditional_logic)),e.fields[n].uid=1<e.fields.length?"wpgb-"+Math.random().toString(36).substr(2,9):e.uid,t.push(["div",i,e.fields[n].label?["label",{class:"wpgb-field-label",for:e.fields[n].uid},e.fields[n].label]:null,A[e.fields[n].type](e.fields[n])])}return t},blocks:function(e){for(var t=["div",["div",{class:"wpgb-search-field"},T.prototype.buildSVGIcon(U.icons.search),["input",{type:"search",class:"wpgb-input wpgb-search-blocks","aria-label":e.placeholder,placeholder:e.placeholder}]]],n=0;n<wpgb_builder_blocks.length;n++)if(wpgb_builder_blocks[n].blocks){t.push(["h3",wpgb_builder_blocks[n].label]);var i=["ul",{class:"wpgb-list wpgb-blocks-list wpgb-list-flex"}];for(var r in wpgb_builder_blocks[n].blocks)if(wpgb_builder_blocks[n].blocks.hasOwnProperty(r)){var o=wpgb_builder_blocks[n].blocks[r];i.push(["li",{class:"wpgb-list-item wpgb-default-block"},T.prototype.buildSVGIcon(e.icons[o.icon]||o.icon||U.icons.custom_block),["span",o.name],["div",T.prototype.buildSVGIcon(U.icons.plus)]])}t.push(i)}return t}};T.prototype.buildSVGIcon=function(e){if(e)return["svg",["use",{"xlink:href":e}]]},T.prototype.buildFields=function(e,t){var n=["div",{class:"wpgb-panel-fields"}];if(e.forEach(function(e){e&&"group"===e.type?e.fields.forEach(function(e){e.value=e.id&&t.hasOwnProperty(e.id)?t[e.id]:void 0!==e.value?e.value:""}):e.value=e.id&&t.hasOwnProperty(e.id)?t[e.id]:void 0!==e.value?e.value:"",n.push("title"===e.type&&e.title?["h3",e.title]:this.buildField(e))}.bind(this)),n[2])return n},T.prototype.buildField=function(e){var t={class:"wpgb-settings-field wpgb-field-"+e.id.replace("_","-")};if(A[e.type]){e.conditional_logic&&(t["data-field-condition"]=JSON.stringify(e.conditional_logic)),e.uid="wpgb-"+Math.random().toString(36).substr(2,9);var n="radio"!==e.type&&"checbox"!==e.for&&"gallery"!==e.type&&"image"!==e.for;return e.label?"group"===e.type&&1<e.fields.length?["div",t,["span",{class:"wpgb-field-label"},e.label,this.buildTooltip(e)],["div",{class:"wpgb-field-input"},A[e.type](e)]]:["div",t,n?["label",{class:"wpgb-field-label",for:e.uid},e.label,this.buildTooltip(e)]:["span",{class:"wpgb-field-label"},e.label,this.buildTooltip(e)],"group"!==e.type?["div",{class:"wpgb-field-input"},A[e.type](e)]:A[e.type](e)]:["div",t,"group"!==e.type?["div",{class:"wpgb-field-input"},A[e.type](e)]:A[e.type](e)]}},T.prototype.buildPanel=function(e,t){var n=["div",{class:"wpgb-panel "+(t?"wpgb-draggable-panel ":"")+"wpgb-"+e.id+"-panel",role:"dialog","aria-modal":!0,tabindex:"-1"},e.title?["div",{class:"wpgb-panel-title"},["h3",e.title,["span",{class:"wpgb-block-name"}]],["button",{class:"wpgb-button wpgb-panel-close",type:"button","aria-label":"close"},this.buildSVGIcon(U.icons.cross)]]:""];return e.tabs&&n.push(this.buildTabs(e.tabs)),e.footer&&n.push(this.buildFooter(e.footer)),t&&n.push(["div",{class:"wpgb-handle-resize"}]),n},T.prototype.buildFooter=function(e){if(e.buttons){var i=["div",{class:"wpgb-panel-footer"}];return e.buttons.forEach(function(e){var t=["button",{class:"wpgb-panel-button "+e.class,type:"button","aria-label":e.label,"data-tooltip":""}],n=this.buildSVGIcon(U.icons[e.icon]);t.push(n),i.push(t)}.bind(this)),i}},T.prototype.buildToggles=function(e,r,o){var a=["div",{class:"wpgb-panel-toggles",role:"presentation"}],s=this.buildSVGIcon(U.icons["chevron-down"]);return e.forEach(function(e,t){if("accordion"===e.type&&(e.tab===o||Array.isArray(e.tab)||!(e.tab.indexOf(o)<0))){var n=this.hasSettings(e.id,r),i="wpgb-toggle-"+Math.random().toString(36).substr(2,9);a.push(["div",{class:"wpgb-panel-toggle",role:"heading","aria-level":3,"data-wpgb":e.id},["div",{class:"wpgb-panel-toggle-title"},["button",{class:"wpgb-panel-toggle-button",type:"button","aria-expanded":!1,"aria-controls":i},e.title,["span",{class:n?"wpgb-hassettings":""}],s]],["div",{class:"wpgb-panel-toggle-content",id:i,role:"region"}]])}}.bind(this)),a},T.prototype.hasSettings=function(t,e){var n=[];if(!e)return!1;for(var i=0,r=(n=(n=(n=(n=U.panels.blocks.fields).concat(U.panels.layers.fields)).filter(function(e){return e.id===t&&"accordion"===e.type}))&&n[0]&&n[0].fields).length;i<r;i++){if("group"===n[i].type)for(var o=n[i].fields,a=0,s=o.length;a<s;a++)if(e.hasOwnProperty(o[a].id)&&""!==e[o[a].id])return!0;if(e.hasOwnProperty(n[i].id)&&""!==e[n[i].id])return!0}return!1},T.prototype.buildTabs=function(e){var i=["ul",{class:"wpgb-panel-tabs",role:"tablist"}];return e&&e.length&&e.forEach(function(e,t){var n=e.icon?this.buildSVGIcon(e.icon):"";i.push(["li",{class:"wpgb-panel-tab",role:"tab","aria-selected":t?"false":"true",tabindex:t?"-1":"0","data-wpgb":e.id},n,e.label])}.bind(this)),i},T.prototype.buildTooltip=function(e){if(e.tooltip)return["span",{role:"tooltip","aria-label":e.tooltip,"data-tooltip":"","data-layout":"large"},this.buildSVGIcon(U.icons.info)]},(P=jQuery)(function(){var e="li.wpgb-panel-tab";function t(e,t){var n=0;switch(e.keyCode){case 37:case 38:n=-1;break;case 39:case 40:n=1}n&&(e.preventDefault(),t&&function e(t,n){var i=t.parentElement.children;t=1===n?(t=t.nextElementSibling)||i[0]:(t=t.previousElementSibling)||i[i.length-1];if(null===t.offsetParent)return void e(t,n);r(t);t.focus();t.click()}(e.target,n))}function r(e){for(var t=e.parentElement.children,n=0,i=t.length;n<i;n++){var r=e===t[n],o=r?"0":"-1",a=r?"true":"false";t[n].setAttribute("tabindex",o),t[n].setAttribute("aria-selected",a)}}P(document).on("keydown",e,function(e){t(e,!1)}),P(document).on("keyup",e,function(e){t(e,!0)})});function M(){if(N)return N;z.forEach(function(e){var t=document.createElement("style");document.head.appendChild(t),this[e+"Sheet"]=t.sheet}.bind(this)),N=this}var z=["layout","idle","idlebefore","idleafter","hover","hoverbefore","hoverafter","animate","custom","import","test"];M.prototype.getStyleSheet=function(e){return(e&&-1<z.indexOf(e)?e:"idle")+"Sheet"},M.prototype.addRules=function(e,t,n){if(e=this.getStyleSheet(e),"@import"!==t){var i=this.rulesExist(e,t,n);i?this.addRule(i,n):(n=this.buildRules(n))&&this.insertRules(e,t+"{"+n+"}")}else this[e].insertRule(t+" url("+n+")",0)},M.prototype.rulesExist=function(e,t,n){for(var i=0,r=(n=this[e].cssRules).length;i<r;i++)if(n[i].selectorText===t)return n[i].style},M.prototype.addRule=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)&&e[n]===t[n]||e.setProperty(n,t[n]))},M.prototype.buildRules=function(e){var t="";if(!e)return t;for(var n in e)e.hasOwnProperty(n)&&""!==e[n]&&(t+=n+":"+e[n]+";");return t},M.prototype.insertRules=function(e,t){try{var n=this[e].cssRules.length;this[e].insertRule(t,n)}catch(e){return""}},M.prototype.checkRule=function(e,t){var n=!0,i=".check-rule";try{var r=i+"{"+e+":"+t+"}",o=this.testSheet.cssRules.length;this.testSheet.insertRule(r,o),this.testSheet.cssRules[o].style[e]||(n=!1)}catch(e){this.deleteRules("test",i),n=!1}return this.deleteRules("test",i),n},M.prototype.deleteRules=function(e,t){e=this.getStyleSheet(e);for(var n=this[e].cssRules,i=n.length-1;0<=i;i--)n[i]&&n[i].selectorText&&n[i].selectorText.match(t+"\\b")&&this[e].deleteRule(i)},M.prototype.duplicateRules=function(e,t,n){e=this.getStyleSheet(e);for(var i=this[e].cssRules,r=0,o=i.length;r<o;r++){if(!i[r]||!i[r].selectorText)return;if(i[r].selectorText.match(t+"\\b")){var a=i[r].cssText.replace(t,n);this.insertRules(e,a)}}},M.prototype.getRules=function(e,t){return e=this.getStyleSheet(e),this[e].cssRules};function I(){}I.element=null,I.prototype.init=function(){this.styleSheet=new M,this.buildCard(),new k,new C,this.bindEvents()},I.prototype.bindEvents=function(){window.addEventListener("wpgb_builder.resize_move",this.onResizeMove.bind(this)),window.addEventListener("wpgb_builder.resize_end",this.onResizeEnd.bind(this)),window.addEventListener("wpgb_builder.sort_start",this.onSortStart.bind(this)),window.addEventListener("wpgb_builder.sort_move",this.onSortMove.bind(this)),window.addEventListener("wpgb_builder.sort_end",this.onSortEnd.bind(this)),document.addEventListener("click",this.click.bind(this)),document.addEventListener("input",this.onChange.bind(this)),document.addEventListener("input",this.searchBlocks.bind(this)),document.addEventListener("change",f.throttle(this.onChange.bind(this))),document.querySelector('[data-action="preview"] input').addEventListener("click",this.previewCard.bind(this),!0),document.querySelector('[data-action="save"]').addEventListener("click",this.saveCard.bind(this),!0),window.addEventListener("beforeunload",this.beforeunload.bind(this))},I.prototype.beforeunload=function(e){if(!0===V)return e.returnValue=wpgb_popup_L10n.beforeunload,e.returnValue},I.prototype.searchBlocks=function(e){var t=e.target;if("INPUT"===t.tagName&&"search"===t.type&&t.classList.contains("wpgb-search-blocks")){var n,i=t.value.toLowerCase(),r=(t.parentElement,document.querySelectorAll(".wpgb-blocks-list")),o=!1;String.prototype.normalize&&(i=i.normalize("NFD").replace(/[\u0300-\u036f]/g,""));for(var a=0,s=r.length;a<s;a++){for(var l=!1,c=r[a].children,d=0,p=c.length;d<p;d++){var u=c[d];-1<u.children[1].textContent.toLowerCase().indexOf(i)?(o=l=!0,u.removeAttribute("style")):u.style.display="none"}l?(r[a].removeAttribute("style"),r[a].previousSibling.removeAttribute("style")):(r[a].style.display="none",r[a].previousSibling.style.display="none")}if(n="SPAN"===(n=t.parentNode.nextSibling).tagName?n:null,!i||o||n)o&&n&&n.parentNode.removeChild(n);else(n=document.createElement("span")).textContent=U.L10n.messages.no_results,t.parentNode.parentNode.insertBefore(n,t.parentNode.nextSibling)}},I.prototype.previewCard=function(e){var t=document.querySelector(".wpgb-builder-holder");t.style.display="none",t.classList[this.preview?"remove":"add"]("wpgb-preview");t.clientHeight;t.style.display="",this.preview=!this.preview},I.prototype.getItemName=function(e){if(e.match("block"))e=e.replace("wpgb-block-","Block ");else{var t=U.L10n.layers;e=t[e]?t[e]:e}return e},I.prototype.refreshCodeMirror=function(){for(var e=document.querySelectorAll(".CodeMirror"),t=0;t<e.length;t++)e[t].CodeMirror.refresh()},I.prototype.getSettings=function(e){var t=f.getParent(e,".wpgb-panel"),n=t.querySelectorAll(".wpgb-panel-tab"),i=Y[t.wpgb];if("general"===t.wpgb)return i;i.hasOwnProperty(this.element)&&i[this.element]?i=i[this.element]:i[this.element]={};for(var r=0;r<n.length;r++)n[r].wpgbActive&&((!i[n[r].wpgb]||Object.keys(i[n[r].wpgb]).length<1)&&(i[n[r].wpgb]={}),i=i[n[r].wpgb]);return i},I.prototype.click=function(e){var t=e.target,n=!!t&&t.previousSibling;"LABEL"===t.tagName&&n&&"radio"===n.type&&(["font-style","text-transform","text-decoration","text-align","color_scheme"].indexOf(n.name)<0||n.checked&&(e.preventDefault(),e.stopImmediatePropagation(),n.checked=!n.checked,f.dispatchHTMLEvent(n,"change")))},I.prototype.onChange=function(e){var t=e.target;if(("input"!==e.type||"radio"!==t.type)&&t.name){var n=f.getParent(t,".wpgb-panel");if(n){var i=n.querySelectorAll(".wpgb-panel-tab.wpgb-active-tab"),r=t.value,o=i[i.length-1].wpgb,a=this.getSettings(t);if("checkbox"===t.type&&(r=t.checked?1:0),"radio"!==t.type||t.checked||(r=""),"SELECT"===t.tagName&&t.multiple){r=[];for(var s=t.children,l=0,c=s.length;l<c;l++)s[l].selected&&s[l].value&&r.push(s[l].value)}a[t.name]=r,"color_scheme"!==t.name&&"color"!==t.name||this.setColorScheme(this.element,o,t),this.onStyleChange(o,t,a),this.onContentChange(o,t,a),this.onLayoutChange(o,t,a),this.formatCustomCSS(o,t,a),V=!0}}},I.prototype.setColorScheme=function(e,t,n){var i=document.querySelector("."+e);if(i.wpgbName&&Y.blocks.hasOwnProperty(e)){var r=i.className.match(/wpgb-idle-scheme-([0-9]+)[^\b]*?|wpgb-hover-scheme-([0-9]+)[^\b]*?|wpgb-idle-accent-([0-9]+)[^\b]*?|wpgb-hover-accent-([0-9]+)[^\b]*?/gi),o=Y.blocks[e],a=o?o.style:"",s=a&&a.idle?a.idle.color:"",l=a&&a.hover?a.hover.color:"",c=a&&a.hover?a.hover.hover_selector:"",d=a&&a.idle&&!s?a.idle.color_scheme:"",p=a&&a.hover&&!l?a.hover.color_scheme:"";if(r&&r.forEach(function(e){i.classList.remove(e)}),t){var u="idle"===t?d:p;u?o.content[t+"_scheme"]=u:delete o.content[t+"_scheme"]}if("hover"!==t||c?"hover_selector"===n.name&&(o.content.hover_scheme=p):delete o.content.hover_scheme,d&&i.classList.add("wpgb-idle-"+d),p&&c&&("post_field"!==o.content.source||"the_terms"!==o.content.post_field))i.classList.add("wpgb-hover-"+p);else if("post_field"===o.content.source&&"the_terms"===o.content.post_field)for(var h=0,m=i.children.length;h<m;h++)i.children[h].classList.contains("wpgb-block-term")&&(i.children[h].className="wpgb-block-term",p&&c&&i.children[h].classList.add("wpgb-hover-"+p))}},I.prototype.formatCustomCSS=function(e,t,n){if("custom_css"===e){for(var i=this.parseCSS(t.value),r=this.styleSheet.customSheet.rules.length-1,o=0;o<=r;r--)this.styleSheet.customSheet.deleteRule(r);for(r=0,o=i.length;r<o;r++)this.styleSheet.insertRules("customSheet",i[r])}},I.prototype.onStyleChange=function(t,n,i){if(-1<["idle","hover","animation"].indexOf(t)){if("idle"===t||"hover"===t){if(this.formatProperties(n,i),"hover_selector"===n.name)return["","before","after"].forEach(function(e){this.styleSheet.deleteRules(t+e,this.element),n.value&&this.renderStyles(this.element,t,e,i)}.bind(this)),void this.setColorScheme(this.element,t,n);var e=-1<n.name.indexOf("custom_css_")?n.name.replace("custom_css_",""):"";-1<n.name.indexOf("custom_css")&&this.styleSheet.deleteRules(t+e,this.element),this.renderStyles(this.element,t,e,i)}"animation"===t&&(this.animationPresets(n,i),this.formatAnimation(n,i),n&&"selector"===n.name&&this.styleSheet.deleteRules("animate",this.element),n&&"custom"!==i.presets&&n.name.match("transform|translate|rotate|scale|skew|perspective")&&(document.querySelector('[name="presets"][value="custom"]').checked=!0,i.presets="custom"),this.renderAnimation(this.element,i)),this.checkPosition(n,i)}},I.prototype.onContentChange=function(e,t,n){"content"===e&&("source"===t.name&&"raw_content_block"===t.value&&this.refreshCodeMirror(),this.renderContent(this.element,n))},I.prototype.onLayoutChange=function(e,t,n){"general"===e&&t&&"name"!==t.name&&this.formatLayout(n)},I.prototype.formatLayout=function(e){var t=document.querySelector(".wpgb-card"),n=document.querySelector(".wpgb-card-header"),i=document.querySelector(".wpgb-card-content"),r=document.querySelector(".wpgb-card-footer"),o=document.querySelector(".wpgb-card-media"),a=document.querySelector(".wpgb-card-media-overlay"),s=document.querySelector('.wpgb-edit-layer[data-layer="wpgb-card-media-overlay"]'),l=document.querySelector(".wpgb-builder-holder"),c=document.querySelector(".wpgb-builder-ruler-h"),d=document.querySelector(".wpgb-builder-grid-inner"),p=e.type||"masonry",u=e.content_position,h=e.media_position||"left",m=void 0===e.display_media?1:e.display_media,f=void 0===e.display_overlay?1:e.display_overlay,g=void 0===e.display_footer?1:e.display_footer,b=e.card_layout||"vertical",v=parseInt(e.switch_layout),y=Math.max(300,parseInt(e.card_width,10)||500),w=parseInt(e.media_width,10)||50,_=e.responsive;if(this.card_layout&&this.card_layout!==b){var S=document.querySelector('[name="card_width"]'),x=S.previousSibling;S.value=e.card_width="vertical"===b?"500px":"1000px",x.value=y=parseFloat(S.value);var k=100*(y-x.min)/(x.max-x.min);x.style.backgroundSize=(wpgb_L10n.RTL?100-k:k)+"% 100%"}n.style.display="masonry"!==p||"top"!==u&&"both"!==u?"none":"",i.style.display="masonry"!==p||"bottom"!==u&&"both"!==u?"none":"",o.style.display="masonry"===p&&!m&&u?"none":"",a.style.display=s.style.display=f?"":"none",r.style.display="masonry"!==p||g?"":"none",l.style.width=y+"px",c.style.width=y+"px",d.style.width=y+"px",t.classList.remove("wpgb-horizontal-left","wpgb-horizontal-right"),t.style.fontSize=_?Math.min(y/500*16,999)*("horizontal"===b?.5:1)+"px":"";for(var E={"-webkit-box-flex":1,"-ms-flex-positive":1,"flex-grow":1},C=this.styleSheet.layoutSheet.cssRules.length-1;0<=C;C--)this.styleSheet.layoutSheet.deleteRule(C);if("horizontal"===b&&"masonry"===p){n.style.display="none",i.style.display=o.style.display="",t.classList.add("wpgb-horizontal-"+("right"===h?"left":"right"));var T=".wpgb-card-preview .wpgb-card-inner { -ms-flex-direction: "+("right"===h?"row-reverse":"row")+";-webkit-box-orient: horizontal;-webkit-box-direction: "+("right"===h?"reverse":"normal")+";flex-direction: "+("right"===h?"row-reverse":"row")+";}";T+=".wpgb-card-preview .wpgb-card-media { width: "+w+"% }",T+=".wpgb-card-preview .wpgb-card-media + .wpgb-card-content { width: "+(100-w)+"% }",this.styleSheet.insertRules("layoutSheet","@media screen and (min-width: "+(v||768)+"px) {"+T+"}"),this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-content",E)}else"vertical"!==b||"masonry"!==p||"bottom"!==u&&"both"!==u?"vertical"===b&&"masonry"===p&&"top"===u?this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-header",E):("vertical"!==b||"masonry"!==p||u)&&"masonry"===p||this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-media",E):this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-content",E);e.flex_media&&"masonry"===p&&(this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-media svg[data-ratio]",{display:"none"}),this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-media-content",{position:"relative",width:"100%"}),this.styleSheet.addRules("layout",".wpgb-card-preview .wpgb-card-media-content-top, .wpgb-card-preview .wpgb-card-media-content-bottom",{position:"relative"})),this.card_layout=b},I.prototype.checkPosition=function(e,t){"position"===e.name&&this.checkDroppables()},I.prototype.animationPresets=function(e,t){if(e&&"presets"===e.name){var n=U.animations[e.value];for(var i in n)if(n.hasOwnProperty(i)){var r=document.querySelector('.wpgb-draggable-panel [name="'+i+'"]');if(!r)continue;if(r.value=t[i]=n[i],r.classList.contains("wpgb-range-slider-value")){var o=r.previousSibling,a=o.min,s=o.max,l=parseInt(n[i],10);o.value=l,o.style.backgroundSize=100*(l-a)/(s-a)+"% 100%"}"SELECT"===r.tagName&&f.dispatchHTMLEvent(r,"change")}}},I.prototype.onResizeMove=function(e){var t={},n={},i=e.detail.element,r=i.parentElement.parentElement,o=Y.blocks[i.wpgbName].style.idle;if(n.width=o.width?(o.width.match(/px|%|em/gi)||["px"]).shift():"px",o.height?"absolute"===o.position?n.height=(o.height.match(/px|%|em/gi)||["px"]).shift():n.height=(o.height.match(/px|em/gi)||["px"]).shift():n.height="px",t.width="%"===n.width?(e.detail.width/r.clientWidth*100).toFixed(2):parseInt(e.detail.width,10),t.height="%"===n.height?(e.detail.height/r.clientHeight*100).toFixed(2):parseInt(e.detail.height,10),"em"===n.width||"em"===n.height){var a=parseFloat(document.querySelector(".wpgb-card").style.fontSize||16);a=o["font-size"]&&o["font-size"].match(/em/gi)?parseFloat(o["font-size"])*a:parseFloat(o["font-size"]||a)*(a/16),t.width="em"===n.width?Number(Math.round(e.detail.width/a+"e6")+"e-6").toFixed(3):t.width,t.height="em"===n.height?Number(Math.round(e.detail.height/a+"e6")+"e-6").toFixed(3):t.height}if(e.detail.width&&(o.width=parseFloat(t.width)+n.width),e.detail.height&&(o.height=parseFloat(t.height)+n.height),this.element===i.wpgbName){var s=document.querySelector(".wpgb-block-panel");if(s){var l=s.querySelector('.wpgb-input[name="width"]'),c=s.querySelector('.wpgb-input[name="height"]');l&&c&&(e.detail.width&&(l.value=o.width),e.detail.height&&(c.value=o.height))}}},I.prototype.onResizeEnd=function(e){var t=e.detail.element,n=Y.blocks[t.wpgbName].style.idle;this.renderCSS("idle","."+t.wpgbName,"",n),t.removeAttribute("style")},I.prototype.onSortStart=function(e){for(var t=e.detail.element,n=e.detail.droppable,i=n.children,r=!1,o=0,a=i.length;o<a;o++)if(i[o]!==t&&"relative"===window.getComputedStyle(i[o]).getPropertyValue("position")){r=!0;break}r||n.classList.remove("wpgb-filled")},I.prototype.onSortMove=function(e){var t=e.detail.element,n=t.parentElement.parentElement,i=Y.blocks[t.wpgbName].style.idle,r={},o=i.left&&0!==Number(i.left)?i.left.match(/px|em|%/gi).shift():"px",a=i.top&&0!==Number(i.top)?i.top.match(/px|em|%/gi).shift():"px";if(r.left="%"===o?(e.detail.x/n.clientWidth*100).toFixed(2):parseInt(e.detail.x,10),r.top="%"===a?(e.detail.y/n.clientHeight*100).toFixed(2):parseInt(e.detail.y,10),"em"===o||"em"===a){var s=parseFloat(document.querySelector(".wpgb-card").style.fontSize||16),l=i["font-size"]&&i["font-size"].match(/em/gi)?parseFloat(i["font-size"])*s:parseFloat(i["font-size"]||s)*(s/16);r.left="em"===o?Number(Math.round(e.detail.x/l+"e6")+"e-6").toFixed(3):r.left,r.top="em"===a?Number(Math.round(e.detail.y/l+"e6")+"e-6").toFixed(3):r.top}if(i.left=parseFloat(r.left)+o,i.top=parseFloat(r.top)+a,this.element===t.wpgbName){var c=document.querySelector(".wpgb-block-panel");if(c){var d=c.querySelector('.wpgb-input[name="left"]'),p=c.querySelector('.wpgb-input[name="top"]');d&&p&&(d.value=i.left,p.value=i.top)}}},I.prototype.onSortEnd=function(e){this.checkDroppables();var t=e.detail.element;if("absolute"===window.getComputedStyle(t).getPropertyValue("position")){var n=Y.blocks[t.wpgbName].style.idle;this.renderCSS("idle","."+t.wpgbName,"",n),t.removeAttribute("style")}},I.prototype.checkDroppables=function(){for(var e=document.querySelectorAll(".wpgb-droppable"),t=0,n=e.length;t<n;t++){var i=e[t].children;if(e[t].classList.remove("wpgb-filled"),0!==i.length)for(var r=0,o=i.length;r<o;r++)if("relative"===window.getComputedStyle(i[r]).getPropertyValue("position")){e[t].classList.add("wpgb-filled");break}}};var q=function(){q.prototype.fonts=[],q.prototype.styleSheet=new M,document.addEventListener("change",this.getFontWeights.bind(this)),document.addEventListener("mouseover",this.getGoogleFont.bind(this))};q.prototype=I.prototype,q.prototype.getGoogleFont=function(e){var t=e.target;if(t&&"LI"===t.tagName&&t.classList&&t.classList.contains("wpgb-select-option")&&t!==this.lastFont){var n=t.wpgb_value.replace(/'/g,"");"Open Sans"!==n&&G[n]&&(-1<this.fonts.indexOf(n)||(clearTimeout(this.fontTimeout),this.lastFont=t,this.fontTimeout=setTimeout(function(){this.setGoogleFont(n)}.bind(this),400)))}},q.prototype.setGoogleFont=function(e){if("Open Sans"!==e&&G[e]&&!(-1<this.fonts.indexOf(e))){var t=G[e],n=Object.keys(G).indexOf(e)+1,i=e.replace(/ /g,"+")+":"+t.variants.join(",")+"&subsets="+t.subsets.join(",");this.fonts.push(e),this.styleSheet.addRules("import","@import","https://fonts.googleapis.com/css?family="+i),this.styleSheet.addRules("import","#wpgb-select-font-family ul > li:last-child li:nth-child("+n+")",{"font-family":"'"+e+"'"})}},q.prototype.getFontWeights=function(e){var t=f.getParent(e.target,'.wpgb-select[name="font-family"]');if(t){var n,i=t.value.replace(/'/g,""),r=U.panels.blocks.fields,o={};r.forEach(function(e){"font_accordion"===e.id&&e.fields.forEach(function(e){"font-weight"===e.id&&(o=f.clone(e.options))})}),G[i]&&(i=G[i],n=i.variants,Object.keys(o).forEach(function(e){n.indexOf(e)<0&&"400"!==e&&delete o[e]})),this.setFontWeights(t,o),r=null}},q.prototype.setFontWeights=function(e,t){var n,i=f.getParent(e,".wpgb-settings-field").nextSibling.querySelector('select[name="font-weight"]'),r=i.value,o=document.createDocumentFragment();Object.keys(t).forEach(function(e){(n=document.createElement("option")).value=e,n.textContent=t[e],o.appendChild(n)}),f.removeChildren(i),i.appendChild(o),i.querySelector('option[value="'+r+'"]')?i.value=r:i.value=this.findClosestWeight(i,r),f.dispatchHTMLEvent(i,"change"),f.dispatchHTMLEvent(i,"input")},q.prototype.findClosestWeight=function(e,t){for(var n=0,i=400,r=e.children,o=0,a=r.length;o<a;o++){var s=r[o];(!n||Math.abs(s.value-t)<=n)&&(i=s.value,n=Math.abs(s.value-t))}return i};I.prototype.buildCard=function(){var e=Y.general,t=Y.layers,n=Y.blocks;this.formatLayout(e),this.buildCardContent();var i=f.merge(t,n);this.buildCardCSS(i),this.checkDroppables()},I.prototype.buildCardContent=function(e){for(var t in e=e||wpgb_builder_layout)if(e.hasOwnProperty(t)&&e[t]&&"object"==typeof e[t])if(e[t].hasOwnProperty("blocks")){var n=e[t].blocks,i=document.querySelector(".wpgb-card-"+t);if(n&&i)for(var r=i.querySelector(".wpgb-droppable"),o=0,a=n.length;o<a;o++){var s=n[o],l=document.createElement("div"),c=s.content.name,d=Y.blocks[c];if(d&&d.content)l.wpgbName=c,l.className="wpgb-block "+c,r.appendChild(l),this.renderContent(c,d.content),new S(l)}}else this.buildCardContent(e[t])};var R,D;I.prototype.buildCardCSS=function(e){var n;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];o.animation&&this.renderAnimation(r,o.animation),o.style&&["idle","hover"].forEach(function(t){if(o.style.hasOwnProperty(t)){if(!(n=o.style[t]))return;n["font-family"]&&this.setGoogleFont(n["font-family"].replace(/'/g,"")),["","before","after"].forEach(function(e){this.renderStyles(r,t,e,n)}.bind(this))}}.bind(this))}n=null;var t=Y.general.global_css,a=this.parseCSS(t);for(i=0,l=a.length;i<l;i++)this.styleSheet.insertRules("customSheet",a[i])};I.prototype.saveCard=function(){R&&R.abort();var n=document.querySelector('[name="wpgb_id"]'),e={inner:{header:"",media:{"media-thumbnail":"","media-overlay":"","media-content":{"media-content-top":"","media-content-center":"","media-content-bottom":""}},content:{body:"",footer:""}}};this.savedFonts={google:{}},this.savedSelectors=[],WPGB_Popup_Message("save_changes","loading");var t=f.clone(Y.general);delete t.name,R=jQuery.ajax({url:ajaxurl,type:"POST",data:{nonce:document.querySelector("#wpgb_fields_nonce").value,action:"wpgb_card",method:"save",object:"settings",id:n.value,settings:JSON.stringify({name:Y.general.name,type:Y.general.type||"masonry",layout:{settings:this.filterSettings(this.getLayoutSettings(e)),layers:this.filterSettings(this.getLayout(e)),fonts:this.savedFonts},settings:{general:t,layers:this.filterSettings(this.getLayers()),blocks:this.filterSettings(this.getBlocks())},css:this.getStyles()})},context:this,error:function(e){WPGB_Popup_Message("unknown","error")},success:function(e){if(e.success||e.message){if(WPGB_Popup_Message("save_changes",e.success?"success":"error",e.message),window.history&&window.history.pushState&&e.content){var t=WPGB_Query_String.set({create:"",id:e.content});window.history.replaceState({},"",t),n.value=e.content}}else WPGB_Popup_Message("unknown","error")}}),this.savedFonts=this.savedSelectors=null,V=!1},I.prototype.getLayoutSettings=function(e){return delete(e=this.filterSettings(f.clone(Y.general))).name,delete e.global_css,e},I.prototype.getLayout=function(e){for(var t in e)if("object"==typeof e[t]&&e[t]){var n=Y.layers["wpgb-card-"+t]||{},i=this.getLayout(e[t]);if("media"!==t&&i&&!Object.keys(i).length){delete e[t];continue}e[t]=i,e[t].action=n.action||{}}else{var r=document.querySelector(".wpgb-card-"+t);if(r&&r.offsetParent){var o=r.querySelectorAll(".wpgb-droppable > .wpgb-block");if(o.length||"media"===t||"media-thumbnail"===t||"media-overlay"===t){n=Y.layers["wpgb-card-"+t]||{};e[t]={action:n.action||{},blocks:[]};for(var a=0,s=o.length;a<s;a++){var l=o[a].wpgbName,c=Y.blocks[l],d=c.content||{},p=c.action||{};d.name=l,e[t].blocks.push(this.normalizeBlock({content:d,action:p})),this.savedSelectors.push(l),0}}else delete e[t]}else delete e[t]}return e},I.prototype.getLayers=function(e){for(var t={},n=document.querySelectorAll(".wpgb-card .wpgb-layer"),i=0,r=n.length;i<r;i++){var o=n[i];if(o.offsetParent){var a=o.classList[0];a&&(this.savedSelectors.push(a),Y.layers[a]&&(t[a]=Y.layers[a]))}}return this.savedSelectors.push("wpgb-card-media svg[data-ratio]"),this.savedSelectors.push("wpgb-card-media-content-top"),this.savedSelectors.push("wpgb-card-media-content-center"),this.savedSelectors.push("wpgb-card-media-content-bottom"),t},I.prototype.getBlocks=function(e){for(var t={},n=0,i=this.savedSelectors.length;n<i;n++)if(Y.blocks[this.savedSelectors[n]]){var r=Y.blocks[this.savedSelectors[n]];t[this.savedSelectors[n]]=this.normalizeBlock(r)}return t},I.prototype.normalizeBlock=function(e){if(!e.content)return e;switch(e.content.source){case"post_field":delete e.content.product_field,delete e.content.user_field,delete e.content.term_field;break;case"product_field":delete e.content.post_field,delete e.content.user_field,delete e.content.term_field;break;case"term_field":delete e.content.product_field,delete e.content.post_field,delete e.content.user_field;break;case"user_field":delete e.content.product_field,delete e.content.post_field,delete e.content.term_field;break;default:delete e.content.post_field,delete e.content.product_field,delete e.content.user_field,delete e.content.term_field}return e},I.prototype.filterSettings=function(n){var t=this;for(var i in n)"object"==typeof n[i]&&n[i]?n[i]=Object.keys(n[i]).filter(function(e){return"object"==typeof n[i][e]&&t.filterSettings(n[i]),""!==n[i][e]&&null!==n[i][e]&&void 0!==n[i][e]}).reduce(function(e,t){return e[t]=n[i][t],e},{}):""!==n[i]&&null!==n[i]&&void 0!==n[i]||delete n[i];return n},I.prototype.downloadDefaultBlock=function(e){var t=0,n={};for(var i in e){var r=(i=e[i]).content,o=r.source?r.source:"post_field",a=r[o]?r[o]:o;"media_button_block"!==o&&"social_share_block"!==o&&"svg_icon_block"!==o||(o="media_content"),"metadata"!==o&&"raw_content_block"!==o&&"custom_block"!==o||(o="custom_content"),n[o]||(n[o]={label:o,blocks:{}}),this.normalizeBlock(i),n[o].blocks[t]={name:a,settings:i},t++}e=[];for(var s in n)e.push(n[s]);var l=new Blob([JSON.stringify(e)],{type:"octet/stream"}),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download="default-blocks.json",d.textContent="default-blocks.json",document.body.appendChild(d),d.click()},I.prototype.downloadBlocksSettings=function(e){var t={};for(var n in e){var i=(n=e[n]).content,r=i.source?i.source:"post_field",o=i[r]?i[r]:r;this.normalizeBlock(n),t[o]=n}var a=new Blob([JSON.stringify(t)],{type:"octet/stream"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download="default-blocks.json",l.textContent="default-blocks.json",document.body.appendChild(l),l.click()},I.prototype.getIcons=function(){for(var e=[],t=0,n=this.savedSelectors.length;t<n;t++)if(Y.blocks[this.savedSelectors[t]]){var i=Y.blocks[this.savedSelectors[t]].content;"svg_icon_block"===i.source?e.push(i.svg_name):"social_share_block"===i.source&&e.push("wpgb/social-media/"+i.social_network)}return e?e.filter(function(e,t,n){return n.indexOf(e)===t}):e},I.prototype.getStyles=function(e){var t="",n=["layout","idle","idlebefore","idleafter","hover","hoverbefore","hoverafter","animate"];this.savedSelectors=this.orderSelector(this.savedSelectors),arr=[];for(var o=0,i=this.savedSelectors.length;o<i;o++)n.forEach(function(e){if(this.styleSheet[e+"Sheet"])for(var t=0,n=(a=this.styleSheet[e+"Sheet"].cssRules).length;t<n;t++)if(a[t]&&a[t].selectorText){var i=new RegExp("(^|[^\\w-])"+this.savedSelectors[o]+"([^\\w-]|$)","g");if(a[t].selectorText.match(i)){var r=a[t].selectorText.replace(" .wpgb-preview","");arr[this.savedSelectors[o]]||(arr[this.savedSelectors[o]]={}),arr[this.savedSelectors[o]][r]?arr[this.savedSelectors[o]][r]+=this.autoPrefix(a[t]):arr[this.savedSelectors[o]][r]=this.autoPrefix(a[t])}}}.bind(this));for(var a in arr)for(var r in arr[a])r.indexOf("wpgb-block-")<0&&(t+=r+" {"+this.removeDuplicateDeclarations(arr[a][r])+"}");for(var a in arr)for(var r in arr[a])-1<r.indexOf("wpgb-block-")&&(t+=r+" {"+this.removeDuplicateDeclarations(arr[a][r])+"}");return a=this.styleSheet.layoutSheet.cssRules,t+=this.getMediaStyles(a,!1),a=this.styleSheet.customSheet.cssRules,t=(t+=this.getMediaStyles(a,!0)).replace(/.wpgb-card-preview/g,".wp-grid-builder .wpgb-card-preview")},I.prototype.removeDuplicateDeclarations=function(e){for(var t=e.split(";"),n=[],i="",r=0,o=t.length;r<o;r++){var a=t[r].trim().split(/:(.+)/);a[0]&&a[1]&&(n[a[0].trim()]=a[1].trim())}for(var s in n)i+=s+": "+n[s]+";";return i},I.prototype.getMediaStyles=function(e,t){for(var n="",i=0,r=e.length;i<r;i++)e[i]&&(7!==e[i].type?e[i].cssRules?n+="@media "+e[i].media.mediaText+"{"+this.getMediaStyles(e[i].cssRules,!0)+"}":e[i].href?n+=e[i].cssText:e[i].selectorText&&t&&(n+=e[i].selectorText.replace(" .wpgb-preview","")+"{"+this.autoPrefix(e[i])+"}"):n+=e[i].cssText);return n},I.prototype.orderSelector=function(e){return e.sort(function(e,t){function n(e){for(var t,n,i=new Array,r=0,o=-1,a=0;t=(n=e.charAt(r++)).charCodeAt(0);){var s=46==t||48<=t&&t<=57;s!==a&&(i[++o]="",a=s),i[o]+=n}return i}var i=n(e),r=n(t);for(x=0;i[x]&&r[x];x++)if(i[x]!==r[x]){var o=Number(i[x]),a=Number(r[x]);return o==i[x]&&a==r[x]?o-a:i[x]>r[x]?1:-1}return i.length-r.length})},I.prototype.autoPrefix=function(e){for(var t=e.cssText.replace(e.selectorText+" {",""),n=(t=t.substring(0,t.length-1)).split(";"),i="",r="",o="",a=0,s=n.length;a<s;a++){var l=n[a].trim().split(/:(.+)/);if(l[0]&&l[1]){var c=l[0].trim(),d=l[1].trim();if("transform"!==c&&"transition-property"!==c&&"transition-duration"!==c&&"transition-delay"!==c&&"transition-timing-function"!==c&&"filter"!==c&&"appearance"!==c)if("object-fit"!==c)if("flex-direction"!==c)"flex-grow"!==c?"display"!==c||"flex"!==d?"flex"!==c?("font-family"===c&&G[d.replace(/"/g,"")]&&(r=d.replace(/"/g,"")),"font-weight"===c&&(o=parseInt(d,10)),i+=c+": "+d+";"):(i+="-ms-flex: "+d+";",i+="flex: "+d+";"):(i+="display: -webkit-box;",i+="display: -ms-flexbox;",i+="display: flex;"):(i+="-webkit-box-flex: "+d+";",i+="-ms-flex-positive: "+d+";",i+="flex-grow: "+d+";");else{var p=["column","vertical","normal"];"row"===d?p=["row","horizontal","normal"]:"row-reverse"===d&&(p=["row-reverse","horizontal","reverse"]),i+="-ms-flex-direction: "+p[0]+";",i+="-webkit-box-orient: "+p[1]+";",i+="-webkit-box-direction: "+p[2]+";",i+="flex-direction: "+p[0]+";"}else i+="-o-"+c+": "+d+";",i+=c+": "+d+";";else i+="-webkit-"+c+": "+d+";",i+=c+": "+d+";"}}r&&(this.savedFonts.google[r]=this.savedFonts.google[r]?this.savedFonts.google[r]:[],G[r].variants.indexOf(o.toString())<0&&(o=G[r].variants.reduce(function(e,t){return Math.abs(parseInt(t,10)-o)<Math.abs(parseInt(e,!0)-o)?t:e})),-1===this.savedFonts.google[r].indexOf(o)&&this.savedFonts.google[r].push(o));return i},I.prototype.renderStyles=function(e,t,n,i){e.match("wpgb-block");var r=i.hover_selector;if("hover"===t)var o=this.getParentSelector(e);if(e="."+e,-1<["before","after"].indexOf(n)){var a=i["custom_css"+(n?"_"+n:"")];(i={}).custom_css=a}if("hover"===t){if(!r)return;"card"===r&&(o=""),e=(o||"itself"===r?".wpgb-preview ":".wpgb-preview")+(e="itself"===r?e+":hover":o+":hover "+e)}this.renderCSS(t,e,n,i)},I.prototype.renderCSS=function(e,t,n,i){e+=n,t+=n=n?"::"+n:"",i=f.clone(i),this.validateCustomCSS(n,i),this.setResponsiveFont(n,i),delete i.custom_css,delete i.custom_css_before,delete i.custom_css_after,this.renderFilters(e,t,n,i),this.renderTerms(e,t,n,i),this.styleSheet.addRules(e,".wpgb-card-preview "+t,i),i=null},I.prototype.renderFilters=function(e,t,n,i){i.hasOwnProperty("filter")&&(this.styleSheet.addRules(e,".wpgb-card-preview .wpgb-preview "+t.replace(".wpgb-preview",""),{filter:i.filter}),delete i.filter),i.hasOwnProperty("mix-blend-mode")&&(this.styleSheet.addRules(e,".wpgb-card-preview .wpgb-preview "+t.replace(".wpgb-preview",""),{"mix-blend-mode":i["mix-blend-mode"]}),delete i["mix-blend-mode"])},I.prototype.renderTerms=function(e,t,n,i){var r=t.match(/wpgb-block-(\d*)/);if(r=r?r[0]:null){var o=Y.blocks[r];if(o&&o.content&&"post_field"===o.content.source&&"the_terms"===o.content.post_field){var a={},s=["position","display","overflow","z-index","clear","float","top","right","bottom","left","width","height","margin-top","margin-right","margin-bottom","margin-left","text-align","line-height","font-size"];for(var l in t.indexOf(":hover")<0&&s.push("color"),n&&(s=null),i)"animate"!==e&&(!s||s.indexOf(l)<0)&&(a[l]=i[l],delete i[l]);if("animate"===e&&(a.transition=i.transition||""),a){var c=t.replace(r,r+" .wpgb-block-term");this.styleSheet.addRules(e,".wpgb-card-preview "+c,a)}"idle"===e&&this.styleSheet.addRules(e,".wpgb-card-preview ."+r+" .wpgb-block-term",{"margin-top":o.content["margin-top"]||"","margin-right":o.content["margin-right"]||"","margin-bottom":o.content["margin-bottom"]||"","margin-left":o.content["margin-left"]||""})}}},I.prototype.renderAnimation=function(e,t){var n=this.getParentSelector(e);n="card"===t.selector?"":" "+n;var i,r={opacity:t.opacity<1?t.opacity:"","transition-timing-function":t["transition-timing-function"]?t["transition-timing-function"]:"","transition-duration":t["transition-duration"]?t["transition-duration"]:"","transition-delay":t["transition-delay"]?t["transition-delay"]:"","transform-origin":t.transform?t["transform-origin"]:"",transform:t.transform?t.transform:""},o=(t.transform||"").replace(/(translate3d)\((.+?)\)/g,"$1(0,0,0)").replace(/(rotateX)\((.+?)\)/g,"$1(0)").replace(/(rotateY)\((.+?)\)/g,"$1(0)").replace(/(rotateZ)\((.+?)\)/g,"$1(0)").replace(/(scaleX)\((.+?)\)/g,"$1(1)").replace(/(scaleY)\((.+?)\)/g,"$1(1)").replace(/(scaleZ)\((.+?)\)/g,"$1(1)").replace(/(skew)\((.+?)\)/g,"$1(0,0)"),a={opacity:t.opacity<1?1:"",transform:t.transform?o:""};t.reverse&&(a.transform=t.transform?t.transform:"",r.transform=t.transform?o:"",a.opacity=t.opacity<1?t.opacity:"",r.opacity=t.opacity<1?1:""),this.preview&&(i=document.querySelector(".wpgb-preview ."+e)),this.preview&&i&&(i.style.transition="none"),this.renderCSS("animate",".wpgb-preview ."+e,"",r),this.renderCSS("animate",".wpgb-preview"+n+":hover ."+e,"",a),this.preview&&i&&requestAnimationFrame(function(){setTimeout(function(){i.removeAttribute("style")},0)})},I.prototype.formatAnimation=function(e,t){this.formatTransformOrigin(t),this.formatTransition(t),this.formatTransform(t)},I.prototype.formatProperties=function(e,t){this.formatPosition(e,t),this.formatBoxShadow(e,t),this.formatTextShadow(e,t),this.formatBackgroundImage(e,t),this.formatFilters(e,t)},I.prototype.getParentSelector=function(e){if(!(e=!!e&&document.querySelector("."+e)))return"";var t=f.getParent(e.parentElement,".wpgb-layer");if(!t)return"";var n=t.classList;return n.contains("wpgb-card-header")?".wpgb-card-header":n.contains("wpgb-card-media")||n.contains("wpgb-card-media-thumbnail")||n.contains("wpgb-card-media-overlay")||n.contains("wpgb-card-media-content")?".wpgb-card-media":n.contains("wpgb-card-body")||n.contains("wpgb-card-footer")?".wpgb-card-content":""},I.prototype.formatPosition=function(e,n){if("position"===e.name){var i=e?f.getParent(e,".wpgb-block-panel"):null;if("absolute"===n.position){if(n.float="",n.display="block",!i)return;var t=i.querySelector('.wpgb-select[name="float"]'),r=i.querySelector('.wpgb-select[name="display"]');return t.value="",r.value="block",f.dispatchHTMLEvent(t,"change"),void f.dispatchHTMLEvent(r,"change")}["top","left","bottom","right"].forEach(function(e){var t=i?i.querySelector('.wpgb-input[name="'+e+'"]'):null;t&&(t.value=""),n[e]=""})}},I.prototype.formatBoxShadow=function(e,t){var n="",i=[],r={"box-shadow-type":"","box-shadow-horizontal":0,"box-shadow-vertical":0,"box-shadow-blur":0,"box-shadow-spread":0,"box-shadow-color":""};if(r.hasOwnProperty(e.name)){for(var o in r)if(r.hasOwnProperty(o)){t.hasOwnProperty(o)||(t[o]=""),"box-shadow-type"!==o&&(n+=t[o]);var a=t[o]?t[o]:r[o];i.push(a)}t["box-shadow"]=""!==n?i.join(" ").trim():""}},I.prototype.formatTextShadow=function(e,t){var n="",i=[],r={"text-shadow-horizontal":0,"text-shadow-vertical":0,"text-shadow-blur":0,"text-shadow-color":""};if(r.hasOwnProperty(e.name)){for(var o in r)if(r.hasOwnProperty(o)){t.hasOwnProperty(o)||(t[o]=""),n+=t[o];var a=t[o]?t[o]:r[o];i.push(a)}t["text-shadow"]=""!==n?i.join(" ").trim():""}},I.prototype.formatBackgroundImage=function(e,t){"background-url"===e.name&&(t["background-url"]?t["background-image"]='url("'+t["background-url"]+'")':t["background-image"]="")},I.prototype.validateCustomCSS=function(e,t){if(t.custom_css){var n,i=t.custom_css.replace(/.*{([^}]+)}/,"$1");if(i)if(i=i.split("\r\n").join("\n").split(";"),Array.isArray(i))for(var r in i)if(i.hasOwnProperty(r)){if(!(n=i[r])||n.indexOf(":")<0)return;var o=(n=n.split(":"))[0].trim(),a=n.slice(1).join(":").trim();if(o.length<1||a.length<1)return;if(!this.styleSheet.checkRule(o,a)||!e&&"position"===o)return;t[o]=a}}},I.prototype.setResponsiveFont=function(e,t){this.setFontSize(t),this.setLineHeight(t)},I.prototype.setFontSize=function(e){var t="font-size";if(e.hasOwnProperty(t)&&""!==e[t]){var n=parseFloat(e[t]||16),i=e[t].toString().match("px|em");0,n="px"===(i=i?i.shift():"px")?n/16:n,n=Number(Math.round(n+"e6")+"e-6"),e[t]=n+"em"}},I.prototype.setLineHeight=function(e){var t="line-height";if(e.hasOwnProperty(t)&&""!==e[t]){var n=parseFloat(e[t]),i=e[t].toString().match("px|em");(i=i?i.shift():"")&&"em"!==i&&(n/=this.getFontSize(e),e[t]=Number(Math.round(n+"e6")+"e-6")+"em")}},I.prototype.getFontSize=function(e){var t=0<parseFloat(e["font-size"])?e["font-size"]:"16px",n=parseFloat(t),i=t.toString().match("px|em");return"em"===(i=i?i.shift():"px")?16*n:n},I.prototype.formatTransition=function(e){var t=e["transition-easing"]||"",n=parseInt(e["transition-duration"]||0,10),i=parseInt(e["transition-delay"]||0,10);"custom"===t&&e["cubic-bezier-function"]&&(t=e["cubic-bezier-function"]||""),e["transition-timing-function"]=t,e["transition-duration"]=0<n?(n+"ms ").trim():"",e["transition-delay"]=0<i?(i+"ms ").trim():""},I.prototype.formatTransformOrigin=function(e){var t="",n=[],i={"transform-origin-x":"50%","transform-origin-y":"50%","transform-origin-z":0};for(var r in i)if(i.hasOwnProperty(r)){e.hasOwnProperty(r)||(e[r]=""),t+=e[r];var o=e[r]?e[r]:i[r];n.push(o)}e["transform-origin"]=""!==t?n.join(" ").trim():""},I.prototype.formatTranslate3d=function(e){var t="",n=[],i={translateX:0,translateY:0,translateZ:0};for(var r in i)if(i.hasOwnProperty(r)){e.hasOwnProperty(r)||(e[r]=""),t+=e[r];var o=e[r]?e[r]:i[r];n.push(o)}""!==t&&e.transform.push("translate3d("+n.join(",").trim()+")")},I.prototype.formatRotate3d=function(e){var t={rotateX:0,rotateY:0,rotateZ:0};for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]=""),""!==e[n]&&e.transform.push(n+"("+e[n]+")"))},I.prototype.formatScale3d=function(e){var t={scaleX:0,scaleY:0,scaleZ:0};for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]=""),""!==e[n]&&e.transform.push(n+"("+e[n]+")"))},I.prototype.formatSkew2d=function(e){var t="",n=[],i={skewX:0,skewY:0};for(var r in i)if(i.hasOwnProperty(r)){e.hasOwnProperty(r)||(e[r]=""),t+=e[r];var o=e[r]?e[r]:i[r];n.push(o)}""!==t&&e.transform.push("skew("+n.join(",").trim()+")")},I.prototype.formatTransformPerspective=function(e){var t=e["transform-perspective"];0<e.transform.length&&0<=parseInt(t,10)&&e.transform.unshift("perspective("+t+")")},I.prototype.formatTransform=function(e){e.transform=[],this.formatTranslate3d(e),this.formatRotate3d(e),this.formatScale3d(e),this.formatSkew2d(e),this.formatTransformPerspective(e),e.transform=e.transform?e.transform.join(" "):""},I.prototype.formatFilters=function(e,t){var n=[],i={"filter-sepia":"","filter-brightness":"","filter-contrast":"","filter-saturate":"","filter-grayscale":"","filter-invert":"","filter-hue-rotate":"","filter-blur":""};if(i.hasOwnProperty(e.name)){for(var r in i)i.hasOwnProperty(r)&&(t.hasOwnProperty(r)||(t[r]=""),""!==t[r]&&n.push(r.replace("filter-","")+"("+t[r]+")"));t.filter=n.length?n.join(" ").trim():""}},window.WP_Grid_Builder=new u,window.WP_Grid_Builder.blocks={},window.WP_Grid_Builder.content=I.prototype,window.WP_Grid_Builder.styleSheet={add:function(e){for(selector in e)I.prototype.renderStyles(selector,"idle","",e[selector])},delete:function(e){I.prototype.styleSheet.deleteRules("idle",e)}};function F(){D=U.L10n.blocks}F.prototype=I.prototype,F.date=new d,F.lorem_ipsum=["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent dignissim massa nulla, sed accumsan libero imperdiet vitae.","Phasellus quis tincidunt ipsum. Vestibulum blandit massa id nisi rhoncus, eu volutpat sem bibendum. Curabitur ac justo elit. Aliquam nunc massa, accumsan vitae dui id, vestibulum viverra elit.","Donec tincidunt purus lorem, at rhoncus odio venenatis vel. Fusce quis nunc vel libero vulputate ultrices ut ac quam. Sed euismod nibh sit amet neque vulputate efficitur. Integer congue imperdiet mollis."],F.prototype.purifyText=function(e){if(""===e)return"";var t=document.createElement("div");return t.innerHTML=DOMPurify.sanitize((e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;"),{ALLOWED_TAGS:[""],KEEP_CONTENT:!0}),t.firstChild?t.firstChild.nodeValue:""},F.prototype.post_fields={the_id:function(e,t){return document.createTextNode(9)},the_title:function(e,t){return document.createTextNode(D.the_title)},the_name:function(e,t){return document.createTextNode(D.the_name)},the_content:function(e,t){var n=document.createDocumentFragment();return F.lorem_ipsum.forEach(function(e,t){n.appendChild(document.createTextNode(e)),t<2&&(n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")))}),n},the_excerpt:function(e,t){t=f.extend(t,{excerpt_length:35,excerpt_suffix:""});var n=F.lorem_ipsum.join(" "),i=parseInt(t.excerpt_length,10),r=-1<i?F.prototype.purifyText(t.excerpt_suffix):"";return i=(i=0===(i=isNaN(i)?0:i)?55:i)<=-1?999:i,document.createTextNode(n.split(" ").splice(0,i).join(" ")+r)},the_post_type:function(e,t){return document.createTextNode(D.the_post_type)},the_post_format:function(e,t){return document.createTextNode(D.the_post_format)},the_post_status:function(e,t){return document.createTextNode(D.the_post_status)},the_date:function(e,t){t.format=(t.date_format||D.the_date).trim();var n="ago"!==t.format?F.date.getFormat(t.format):D.the_date_ago;return document.createTextNode(n)},the_modified_date:function(e,t){return F.prototype.post_fields.the_date(e,t)},the_terms:function(e,t){t=f.extend(t,{term_glue:""});for(var n=document.createDocumentFragment(),i=0;i<3;i++){var r=document.createElement("span");if(r.className="wpgb-block-term",r.textContent=D.the_terms+" "+(i+1),n.appendChild(r),t.term_glue&&i<2){var o=document.createElement("span");o.textContent=F.prototype.purifyText(t.term_glue),n.appendChild(o)}}return n},the_author:function(e,t){var n=t.author_prefix;return document.createTextNode(F.prototype.purifyText((n||"")+D.the_author))},the_avatar:function(e,t){var n=document.createElement("div");return n.className="wpgb-block-avatar",n},comments_number:function(e,t){return t=f.extend(t,{count_format:"text"}),document.createTextNode("number"===t.count_format?2:D.comments_number)}},F.prototype.product_fields={the_price:function(e,t){return document.createTextNode("$99")},the_full_price:function(e,t){var n=document.createDocumentFragment(),i=document.createElement("del"),r=document.createElement("ins"),o=document.createElement("span"),a=document.createElement("span");return i.className=r.className="wpgb-block-price",o.className=a.className="amout",o.textContent="$179",a.textContent="$99",i.appendChild(o),r.appendChild(a),n.appendChild(i),n.appendChild(r),n},the_regular_price:function(e,t){var n=document.createElement("del");return n.textContent="$179",n},the_sale_price:function(e,t){return document.createTextNode("$99")},the_star_rating:function(e,t){var n="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xlink",r=document.createElementNS(n,"svg"),o=document.createElementNS(n,"use");return r.setAttribute("xmlns",n),r.setAttribute("xmlns:xlink",i),r.setAttributeNS(null,"class","wpgb-icon-rating-stars"),r.setAttributeNS(null,"width","100%"),r.setAttributeNS(null,"height","100%"),r.setAttributeNS(null,"viewbox","0 0 120 24"),o.setAttributeNS(i,"xlink:href",U.icons["rating-stars"]),r.appendChild(o),r},the_text_rating:function(e,t){return document.createTextNode(D.the_text_rating)},the_on_sale_badge:function(e,t){var n={badge_type:"text",badge_icon:"wpgb/business/cart-1",badge_label:D.the_on_sale_badge};return"icon"!==(t=f.extend(t,n)).badge_type?(t.badge_label=F.prototype.purifyText(t.badge_label),document.createTextNode((t.badge_label||"").trim()||D.the_on_sale_badge)):(icon=document.querySelector('.wpgb-icon-item[data-icon="'+t.badge_icon+'"]'),icon=icon?icon.firstElementChild.cloneNode(!0):null,icon)},the_in_stock_badge:function(e,t){return t.badge_label=F.prototype.purifyText(t.badge_label),document.createTextNode((t.badge_label||"").trim()||D.the_in_stock_badge)},the_out_of_stock_badge:function(e,t){return t.badge_label=F.prototype.purifyText(t.badge_label),document.createTextNode((t.badge_label||"").trim()||D.the_out_of_stock_badge)},the_cart_button:function(e,t){return document.createTextNode(D.the_cart_button)}},F.prototype.user_fields={the_user_id:function(e,t){return document.createTextNode(9)},the_user_display_name:function(e,t){return document.createTextNode(D.the_user_display_name)},the_user_first_name:function(e,t){return document.createTextNode(D.the_user_first_name)},the_user_last_name:function(e,t){return document.createTextNode(D.the_user_last_name)},the_user_nickname:function(e,t){return document.createTextNode(D.the_user_nickname)},the_user_login:function(e,t){return document.createTextNode(D.the_user_login)},the_user_description:function(e,t){return F.prototype.post_fields.the_excerpt(e,t)},the_user_email:function(e,t){return document.createTextNode("user@email.com")},the_user_url:function(e,t){return t=f.extend(t,{website_text:""}),document.createTextNode(F.prototype.purifyText(t.website_text)||"https://website.com")},the_user_roles:function(e,t){return document.createTextNode(D.the_user_roles)},the_user_post_count:function(e,t){return t=f.extend(t,{count_format:"text"}),document.createTextNode("number"===t.count_format?10:D.the_user_post_count)}},F.prototype.term_fields={the_term_id:function(e,t){return document.createTextNode(9)},the_term_name:function(e,t){return document.createTextNode(D.the_term_name)},the_term_slug:function(e,t){return document.createTextNode(D.the_term_slug)},the_term_taxonomy:function(e,t){return document.createTextNode(D.the_term_taxonomy)},the_term_parent:function(e,t){return document.createTextNode(D.the_term_parent)},the_term_description:function(e,t){return F.prototype.post_fields.the_excerpt(e,t)},the_term_count:function(e,t){return t=f.extend(t,{count_format:"text"}),document.createTextNode("number"===t.count_format?10:D.the_term_count)}},F.prototype.renderContent=function(e,t){var n=document.querySelector("."+e);if(n){var i,r=0<n.querySelectorAll("svg").length,o=0<n.querySelectorAll(".wpgb-block-term").length,a="";switch(t.source){case"post_field":var s=document.querySelector('select[name="'+t.source+'"]');a=t.post_field=t.post_field||s&&s.value||"the_id",this.post_fields.hasOwnProperty(a)&&(i=this.post_fields[a](n,t));break;case"product_field":s=document.querySelector('select[name="'+t.source+'"]');a=t.product_field=t.product_field||s&&s.value||"the_full_price",this.product_fields.hasOwnProperty(a)&&(i=this.product_fields[a](n,t));break;case"user_field":s=document.querySelector('select[name="'+t.source+'"]');a=t.user_field=t.user_field||s&&s.value||"the_user_id",this.user_fields.hasOwnProperty(a)&&(i=this.user_fields[a](n,t));break;case"term_field":s=document.querySelector('select[name="'+t.source+'"]');a=t.term_field=t.term_field||s&&s.value||"the_term_id",this.term_fields.hasOwnProperty(a)&&(i=this.term_fields[a](n,t));break;case"metadata":a="metadata";var l=F.prototype.purifyText(t.meta_prefix||""),c=F.prototype.purifyText(t.meta_suffix||"");i=document.createTextNode(l+"{{ "+(t.meta_key||D.metadata)+" }}"+c);break;case"media_button_block":a="media_button_block";var d=t.lightbox_icon||"wpgb/user-interface/add";i=(i=document.querySelector('.wpgb-icon-item[data-icon="'+d+'"]'))?i.firstElementChild.cloneNode(!0):null;break;case"social_share_block":a="social_share_block",i=(i=document.querySelector('.wpgb-icon-item[data-icon="wpgb/social-media/'+(t.social_network||"facebook")+'"]'))?i.firstElementChild.cloneNode(!0):null;break;case"svg_icon_block":a="svg_icon_block";d=t.svg_name?t.svg_name:"wpgb/animals/bug";i=(i=document.querySelector('.wpgb-icon-item[data-icon="'+d+'"]'))?i.firstElementChild.cloneNode(!0):null;break;case"raw_content_block":a="raw_content_block",(i=document.createElement("div")).innerHTML=DOMPurify.sanitize(t.raw_content);break;case"custom_block":a="custom_block";var p=t.block_name||"",u=U.panels.blocks.fields.filter(function(e){return"block_name"===e.id});p=u[0]&&u[0].hasOwnProperty("options")?p&&u[0].options.hasOwnProperty(p)?"{{ "+u[0].options[p]+" }}":"*** "+D.custom_block.not_selected+" ***":"*** "+D.custom_block.not_founded+" ***",i=document.createTextNode(p);break;default:var h=t.source,m=(s=document.querySelector('select[name="'+h+'"]'),!t[h]&&U.panels.blocks.fields.filter(function(e){return e.id===h}));m&&m[0]&&(t[h]=m[0].options&&Object.keys(m[0].options)[0]),i=(a=t[h])&&WP_Grid_Builder.blocks[a]&&WP_Grid_Builder.blocks[a](t,e,n),a&&!i?i=document.createTextNode("{{ "+a+" }}"):a||(i=document.createTextNode("*** "+D.not_founded+" ***"))}var f=n.firstElementChild;f&&i&&f.isEqualNode(i)||(this.removeContent(n),i&&n.insertBefore(i,n.firstElementChild)),this.setClassName(n,t),this.iconStroke(n,r,e,t),this.termsStyles(n,o,e,t),this.termsSpacing(e,t),WP_Grid_Builder.emit("blockRendered",[a,t,e,n])}},F.prototype.removeContent=function(e){for(var t=e.childNodes,n=t.length-1;0<=n;n--)t[n].classList&&t[n].classList.contains("wpgb-resizer")||t[n].parentNode.removeChild(t[n])},F.prototype.setClassName=function(e,t){for(var n=t.class,i=e.classList,r=new RegExp("^wpgb-block$|^"+e.wpgbName+"$|wpgb-idle-scheme-([0-9]+)[^\b]*?|wpgb-hover-scheme-([0-9]+)[^\b]*?|wpgb-idle-accent-([0-9]+)[^\b]*?|wpgb-hover-accent-([0-9]+)[^\b]*?","gi"),o=i.length-1,a=0;a<=o;o--)i[o].match(r)||i[o]&&e.classList.remove(i[o]);if(this.setColorScheme(e.wpgbName,"",""),n){var s=n.trim().split(/\s+/);for(o=0,a=s.length;o<a;o++)if(n=(n=(n=s[o]).replace(/|%[a-fA-F0-9][a-fA-F0-9]|/g,"")).replace(/[^A-Za-z0-9_-]/g,"").trim())try{i.add(n)}catch(e){}}},F.prototype.iconStroke=function(e,t,n,i){var r=0<e.querySelectorAll("svg").length;return!0===t&&!1==r?(Y.blocks[n].style.idle["stroke-width"]="",void this.renderStyles(n,"","",{"stroke-width":""})):!0==r?(Y.blocks[n].style.idle["stroke-width"]=i["stroke-width"]||1,void this.renderStyles(n,"","",{"stroke-width":i["stroke-width"]||1})):void 0},F.prototype.termsSpacing=function(e,t){"the_terms"===t.post_field&&this.renderStyles(e+" .wpgb-block-term","","",{"margin-top":t["margin-top"]||"","margin-right":t["margin-right"]||"","margin-bottom":t["margin-bottom"]||"","margin-left":t["margin-left"]||""})},F.prototype.termsStyles=function(e,t,n,i){t!==0<e.querySelectorAll(".wpgb-block-term").length&&(i=Y.blocks[n].style,["idle","hover"].forEach(function(t){i.hasOwnProperty(t)&&["","before","after"].forEach(function(e){this.styleSheet.deleteRules(t+e,n),this.renderStyles(n,t,e,i[t])}.bind(this))}.bind(this)))},I.prototype.cssKeyframe="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",I.prototype.cssCombined="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",I.prototype.cssImport=new RegExp("@import .*?;","gi"),I.prototype.parseCSS=function(e){if(void 0===e)return[];for(var t,n=[];null!==(t=this.cssImport.exec(e));)n.push(t[0]);e=e.replace(this.cssImport,"");for(var i=new RegExp(this.cssKeyframe,"gi");null!==(t=i.exec(e));)n.push(t[0]);e=e.replace(i,"");for(var r=new RegExp(this.cssCombined,"gi");null!==(t=r.exec(e));){var o=void 0===t[2]?t[5]:t[2];if(-1!==(o=(o=o.split("\r\n").join("\n").trim()).replace(/\n+/,"\n")).indexOf("@media")){var a=this.parseCSS(t[3]+"\n}");n.push(o+"{"+a.join("")+"}")}else n.push(".wpgb-card-preview .wpgb-preview "+o+"{"+t[6]+"}")}return n};function B(){I.call(this),this.view=new g,this.framework=new T,this.appendGeneralPanel(),this.bindEvents()}((B.prototype=Object.create(I.prototype)).constructor=B).prototype.bindEvents=function(){this.mobile=window.innerWidth<=1280,window.addEventListener("resize",this.switchEditor.bind(this)),window.addEventListener("click",this.onClick.bind(this),!0),window.addEventListener("click",this.closePanel.bind(this),!0),window.addEventListener("click",this.appendLayerPanel.bind(this),!0);for(var e=document.querySelectorAll(".wpgb-edit-layer-menu li"),t=0;t<e.length;t++)e[t].addEventListener("mouseenter",this.highlightLayer.bind(this,!0)),e[t].addEventListener("mouseleave",this.highlightLayer.bind(this,!1))},B.prototype.switchEditor=function(){var e=window.innerWidth,t=document.querySelector(".wpgb-card-panel > ul > li:nth-child(2)"),n=document.querySelector(".wpgb-card-panel > ul > li:nth-child(1)");e<=1280&&!this.mobile?(t.click(),this.mobile=!0):1280<e&&this.mobile&&(t.classList.contains("wpgb-active-tab")&&n.click(),this.mobile=!1)},B.prototype.onClick=function(e){var t=f.getParent(e.target,".wpgb-panel-toggle-title");if(t)return t=t.parentElement,this.renderToggle(t,t.wpgb),void this.initHelpers();(t=f.getParent(e.target,".wpgb-panel-tab"))&&!t.wpgbActive&&(f.getParent(e.target,".wpgb-card-panel")&&document.querySelector(".wpgb-builder-right-panel").classList["editor"===t.wpgb?"add":"remove"]("wpgb-reveal-editor"),this.renderTabContent(t,t.wpgb),this.initHelpers())},B.prototype.appendGeneralPanel=function(){var e,t="general";e=(e=U.panels)[t],e=this.framework.buildPanel(e),(e=this.view.render(e)).wpgb=t,this.renderTabContent(e.querySelector(".wpgb-panel-tab")),document.querySelector(".wpgb-builder-left-panel").appendChild(e),this.initHelpers()},B.prototype.initHelpers=function(){requestAnimationFrame(function(){setTimeout(function(){WPGB_Select_Init(),WPGB_Tooltip_Init(),WPGB_Gradient_Init()},0)}),f.dispatchEvent(window,"wpgb_builder.render_field")},B.prototype.renderToggle=function(e,i,t){var n=f.getParent(e,".wpgb-panel"),r=n.querySelector(".wpgb-active-toggle"),o=n.querySelectorAll(".wpgb-active-tab");if(o=o[o.length-1].wpgb,r){var a=Y[n.wpgb][this.element].style["style"===o?"idle":o];a=this.framework.hasSettings(r.wpgb,a),r.querySelector(".wpgb-panel-toggle-title span").classList[a?"add":"remove"]("wpgb-hassettings")}if(e.classList.contains("wpgb-active-toggle"))this.removeToggle(e);else{this.removeToggle(e),e.classList.add("wpgb-active-toggle"),e.querySelector(".wpgb-panel-toggle-button").setAttribute("aria-expanded",!0);a=this.getSettings(e);var s=e.lastElementChild,l=f.clone(U.panels[n.wpgb].fields);(l=(l=(l=(l=l.filter(function(e){var t=e.tab===o||Array.isArray(e.tab)&&-1<e.tab.indexOf(o),n="accordion"===e.type&&e.id===i;return t&&n}))&&l[0]&&l[0].fields)&&this.framework.buildFields(l,a))&&this.view.render(l))&&s.appendChild(l),!1!==t&&_(e),l=null}},B.prototype.removeToggle=function(e){for(var t=e.parentNode.querySelectorAll(".wpgb-panel-toggle-content"),n=0;n<t.length;n++)t[n].parentElement.classList.remove("wpgb-active-toggle"),t[n].previousElementSibling.firstElementChild.setAttribute("aria-expanded",!1),f.removeChildren(t[n])},B.prototype.appendPanel=function(e,t){I.prototype.element=t;var n=document.querySelector(".wpgb-draggable-panel");if(n&&n.wpgb===e)return n.querySelector(".wpgb-block-name").textContent="("+this.getItemName(t)+")",this.replacePanel(n),void this.initHelpers();n&&(this.removePanel(),I.prototype.element=t),n=(n=(n=U.panels)[e]).hasOwnProperty(t)?n[t]:n,n=this.framework.buildPanel(n,!0),(n=this.view.render(n)).wpgb=e,n.querySelector(".wpgb-block-name").textContent="("+this.getItemName(t)+")";var i=this.getPanelCookie();n.style.height=i.height+"px",n.style.width=i.width+"px",this.panelPosition?(n.style.left=this.panelPosition.left,n.style.top=this.panelPosition.top):(n.style.top=Math.max(46,i.top||document.body.clientHeight/2-i.height/2+32)+"px",n.style.left=Math.max(0,i.left||document.body.clientWidth/2-i.width/2)+"px");var r=n.querySelector(".wpgb-panel-tab");this.renderTabContent(r),document.querySelector(".wpgb-builder-right-panel").appendChild(n),r.focus(),this.updateItemList(),this.initHelpers()},B.prototype.getPanelCookie=function(){var e=new RegExp("wpgb_panel_size=(.*?);");return e=(e=document.cookie.match(e))&&e[1]?e[1].split(","):[440,650,null,null],{width:Math.min(document.body.clientWidth,e[0]),height:Math.min(document.body.clientHeight,e[1]),top:e[2],left:e[3]}},B.prototype.appendLayerPanel=function(e){var t,n,i=document.querySelector(".wpgb-card-media .wpgb-edit-layer");if(!(t=f.getParent(e.target,".wpgb-edit-layer")))return i.classList.remove("wpgb-active"),void this.layerPerspective(!1);if(t.querySelector(".wpgb-edit-layer-menu"))if(i.classList.toggle("wpgb-active"),i.classList.contains("wpgb-active")){for(var r=i.querySelectorAll("li"),o=0;o<r.length;o++){var a=r[o].getAttribute("data-layer");r[o].classList[this.element===a?"add":"remove"]("wpgb-selected")}this.layerPerspective(!0)}else this.layerPerspective(!1);else{if((n=t.getAttribute("data-layer"))===this.element)return i.classList.remove("wpgb-active"),void this.layerPerspective(!1);this.layerPerspective(!1),this.appendPanel("layers",n);var s=document.querySelectorAll(".wpgb-edit-layer.wpgb-show");if(s){o=0;for(var l=s.length;o<l;o++)s[o].classList.remove("wpgb-show")}t="LI"===t.tagName?f.getParent(t.parentElement,".wpgb-edit-layer"):t,i.classList.remove("wpgb-active"),t.classList.add("wpgb-show")}},B.prototype.addIcon=function(e){for(var t=e.querySelectorAll(".wpgb-icon-picker input.wpgb-input"),n=0,i=t.length;n<i;n++){var r=t[n];if(r.value){var o=document.querySelector('.wpgb-icon-item[data-icon="'+r.value+'"]');(o=o?o.firstElementChild.cloneNode(!0):null)&&r.parentElement.querySelector(".wpgb-icon-picker-svg").appendChild(o)}}},B.prototype.replacePanel=function(e){var t=e.querySelectorAll(".wpgb-active-tab"),n=e.querySelectorAll(".wpgb-active-toggle"),i=(n=n[n.length-1])?Array.prototype.indexOf.call(n.parentNode.children,n):null,r=t?t[t.length-1].parentElement.nextSibling.scrollTop:0;t.length&&(t=t[t.length-1],this.renderTabContent(t,t.wpgb,!1)),n&&0<=i&&(n=(n=e.querySelectorAll(".wpgb-panel-toggle"))[i],this.renderToggle(n,n.wpgb,!1),t.parentElement.nextSibling.scrollTop=r),this.updateItemList()},B.prototype.closePanel=function(e){f.getParent(e.target,".wpgb-panel-close")&&(this.removePanel(e),this.updateItemList())},B.prototype.removePanel=function(){if(this.element){var e=document.querySelector(".wpgb-draggable-panel");document.querySelector("."+this.element);if(e){this.panelPosition={left:e.style.left,top:e.style.top};var t=document.querySelector(".wpgb-resizer.wpgb-show"),n=document.querySelector(".wpgb-edit-layer.wpgb-show");t&&t.classList.remove("wpgb-show"),n&&n.classList.remove("wpgb-show"),e.parentNode.removeChild(e),I.prototype.element=null}}},B.prototype.renderTabContent=function(e,t){if(e){for(var n=e.parentNode.children,i=f.getParent(e,".wpgb-panel"),r=0,o=n.length;r<o;r++)n[r].classList.remove("wpgb-active-tab"),n[r].wpgbActive=0;e.classList.add("wpgb-active-tab"),e.wpgbActive=1,(n=e.parentElement).nextSibling&&n.nextSibling.classList.contains("wpgb-panel-content")&&n.nextSibling.parentNode.removeChild(n.nextSibling);var a=this.getSettings(e),s=this.getTabContent(i.wpgb,t,a);s&&(this.addIcon(s),n.parentNode.insertBefore(s,n.nextSibling))}},B.prototype.getTabContent=function(e,t,n){var i,r=[],o=[],a=document.createDocumentFragment(),s=f.clone(U),l=s.panels,c=l?l[e]:null;c.hasOwnProperty(this.element)&&(c=c[this.element]);var d=this.searchTabContent(c,t);if(d){var p=c.tabs.filter(function(e){return e.id===t});if(p&&p[0]&&p[0].tabs&&(i=this.framework.buildTabs(p[0].tabs),(i=this.view.render(i)).firstElementChild.classList.add("wpgb-active-tab"),i.firstElementChild.wpgbActive=1,d=this.searchTabContent(c,p[0].tabs[0].id),t=p[0].tabs[0].id),d.fields){r=d.fields;var u=this.element&&Y[e][this.element],h=u&&u.content,m=h&&h.source;"blocks"===e&&"action"===t&&("media_button_block"===m||"social_share_block"===m||"user_field"===m&&"the_user_url"===h.user_field||"user_field"===m&&"the_user_email"===h.user_field||"product_field"===m&&"the_cart_button"===h.product_field||"post_field"===m&&"the_terms"===h.post_field&&h.term_link?r=r.slice(0,1):r.shift()),(r=(r=r&&this.framework.buildFields(r,n))&&this.view.render(r))&&a.appendChild(r)}if("idle"===t||"hover"===t)n=(n=Y[e][this.element].style)?n["style"===t?"idle":t]:null,o=this.framework.buildToggles(d.fields,n,t),o=this.view.render(o),a.appendChild(o);return a?(c=this.view.render(["div",{class:"wpgb-panel-content"}]),i?((d=c.cloneNode()).appendChild(a),c.appendChild(i),c.appendChild(d)):c.appendChild(a),s=null,c):void 0}},B.prototype.searchTabContent=function(e,t){var n={fields:[]};return t=t||e.tabs[0].id,e.fields.forEach(function(e){(e.tab===t||Array.isArray(e.tab)&&-1<e.tab.indexOf(t))&&n.fields.push(e)}.bind(this)),n},B.prototype.layerPerspective=function(e){var t,n,i=document.querySelector(".wpgb-card-media"),r=document.querySelectorAll(".wpgb-card-media, .wpgb-card-media > .wpgb-layer");e=!document.querySelector(".wpgb-preview")&&e;for(var o=0;o<r.length;o++)if(t=r[o],e){if(t.querySelector(".wpgb-layer-highlight"))continue;(n=document.createElement("div")).className="wpgb-layer-highlight",t.appendChild(n)}else(n=t.lastElementChild)&&n.classList.contains("wpgb-layer-highlight")&&t.removeChild(n);i.style.perspective=e?2.4*i.clientWidth+"px":null,setTimeout(function(){i.classList[e?"add":"remove"]("wpgb-layers-perspective")},0)},B.prototype.highlightLayer=function(e,t){var n=t.target.getAttribute("data-layer"),i=document.querySelector("."+n);i&&i.classList[e?"add":"remove"]("wpgb-show")};function j(){this.view=new g,window.addEventListener("click",this.openList.bind(this),!0),window.addEventListener("wpgb_builder.sort_start",this.openList.bind(this)),window.addEventListener("wpgb_builder.resize_start",this.openList.bind(this))}(j.prototype=B.prototype).openList=function(e){var t=document.querySelector(".wpgb-builder-list ul"),n=f.getParent(e.target,".wpgb-builder-list");if(t)return t.parentNode.classList.remove("wpgb-list-open"),t=t.parentNode.removeChild(t),void(t=null);if(n){var i=document.querySelector(".wpgb-card"),r=this.buildList(i,!1);this.layerPerspective(!0),n.classList.add("wpgb-list-open"),n.appendChild(r)}},j.prototype.buildList=function(e,t){var n=t||document.createElement("ul"),i=e.children;if(i){for(var r=0,o=i.length;r<o;r++){var a=i[r],s=f.matchesSelector(a,".wpgb-layer"),l=f.matchesSelector(a,".wpgb-block"),c=this.buildList(a,!s&&n);if((l||s)&&(!a||"none"!==a.style.display)){var d=l?a.wpgbName:a.classList[0];"wpgb-card-content"!==d?(s&&(s=this.getListItem(a,"layer",d),n.appendChild(s)),c&&s&&(s||n).appendChild(c),l&&(l=this.getListItem(a,"block",d),n.appendChild(l))):c&&n.appendChild(c)}}return n}},j.prototype.getListItem=function(e,t,n){var i,r=Y.blocks[n],o=r?r.content:null,a=o?o.source||"post_field":null;i=o&&"custom_block"===a?o.block_name||a:o&&o[a]?o[a]:a;var s=X[i],l=$[i],c=document.createElement("li"),d=document.createElement("span"),p=s?s+" ("+n.replace("wpgb-block-","")+")":this.getItemName(n);l=l||"block"!==t?l||U.icons.layer:U.icons.custom_block;l=this.view.render(["svg",["use",{"xlink:href":l}]]);return d.className="wpgb-builder-list-"+t+(this.element===n?" wpgb-selected":""),d.wpgbName=n,d.appendChild(l),d.appendChild(document.createTextNode(p)),d.addEventListener("click",this.selectItem.bind(this)),d.addEventListener("mouseenter",this.revealItem.bind(this,"add")),d.addEventListener("mouseleave",this.revealItem.bind(this,"remove")),c.appendChild(d),c},j.prototype.selectItem=function(e){this.revealItem("remove",e);var t=document.querySelector("."+e.target.wpgbName);if(t.classList.contains("wpgb-block"))t.click();else{var n=document.querySelector('[data-layer="'+e.target.wpgbName+'"]');n&&n.click()}},j.prototype.updateItemList=function(){var e=document.querySelector(".wpgb-builder-list"),t=e.querySelector("span");this.placeholder||(this.placeholder=t.textContent);var n=this.element?this.getItemName(this.element):this.placeholder;e.classList[this.element?"add":"remove"]("wpgb-selected"),t.textContent=n},j.prototype.revealItem=function(e,t){var n=document.querySelector("."+t.target.wpgbName);if(n&&(!this.element||n.wpgbName!==this.element)){var i=n.lastElementChild;(n=i&&i.classList.contains("wpgb-resizer")?i:n).classList[e]("wpgb-show")}};function H(){B.call(this),this.styleSheet=new M,document.addEventListener("click",this.blockActions.bind(this),!1),document.addEventListener("click",this.selectBlock.bind(this),!1),document.addEventListener("click",this.addBlock.bind(this),!1)}((H.prototype=Object.create(B.prototype)).constructor=H).prototype.blockActions=function(e){var t=f.getParent(e.target,".wpgb-panel-button");if(t){var n=t.classList;if(n=n[1]?n[1]:null){var i=document.querySelector("."+this.element);if(i)switch(n){case"wpgb-delete-block":this.deleteBlock(i);break;case"wpgb-duplicate-block":this.duplicateBlock(i);break;case"wpgb-move-up-block":this.moveUpBlock(i);break;case"wpgb-move-down-block":this.moveDownBlock(i)}}}},H.prototype.uniqueName=function(e){for(var t,n=Y.blocks,i=!0,r=1;i=n[t=e+"-"+r],r++,i;);return t},H.prototype.selectBlock=function(e){if(3!=e.which){var t=f.getParent(e.target,".wpgb-block");if(t&&t.wpgbName!==this.element){this.appendPanel("blocks",t.wpgbName);for(var n=t.querySelector(".wpgb-resizer"),i=document.querySelectorAll(".wpgb-resizer.wpgb-show"),r=0,o=i.length;r<o;r++)i[r].classList.remove("wpgb-show");n&&n.classList.add("wpgb-show")}}},H.prototype.addBlock=function(e){var t=f.getParent(e.target,".wpgb-default-block");if(t){for(var n,i=Array.prototype.indexOf.call(document.querySelectorAll(".wpgb-default-block"),t),r=this.uniqueName("wpgb-block"),o=document.createElement("div"),a=(document.createElement("div"),document.querySelectorAll(".wpgb-layer .wpgb-droppable")),s=0,l=a.length;s<l;s++)if(a[s].offsetParent){n=a[s];break}if(n){o.wpgbName=r,o.className="wpgb-block "+r,n.firstElementChild?n.insertBefore(o,n.firstElementChild):n.appendChild(o);var c={};for(s=0,l=wpgb_builder_blocks.length;s<l;s++){var d=wpgb_builder_blocks[s].blocks;if(d&&d.hasOwnProperty(i)){c=d[i].settings;break}}Y.blocks||(Y.blocks=[]),Y.blocks[r]=f.clone(c);var p={};p[r]=Y.blocks[r],this.renderContent(r,Y.blocks[r].content),this.buildCardCSS(p),this.checkDroppables(),new S(o),V=!0}}},H.prototype.duplicateBlock=function(e){var t=e?e.wpgbName:null;if(t){var n=e.cloneNode(!0),i=this.uniqueName("wpgb-block");n.querySelector(".wpgb-resizer")&&n.removeChild(n.querySelector(".wpgb-resizer")),n.className=n.className.replace(t,i),n.wpgbName=i,new S(n),Y.blocks[i]=f.clone(Y.blocks[t]),this.styleSheet.duplicateRules("idle",t,i),this.styleSheet.duplicateRules("idlebefore",t,i),this.styleSheet.duplicateRules("idleafter",t,i),this.styleSheet.duplicateRules("hover",t,i),this.styleSheet.duplicateRules("hoverbefore",t,i),this.styleSheet.duplicateRules("hoverafter",t,i),this.styleSheet.duplicateRules("animate",t,i),e.parentNode.insertBefore(n,e.nextSibling),this.checkDroppables(),V=!0}},H.prototype.deleteBlock=function(t){WPGB_Dialog(wpgb_dialog_L10n.delete_block,function(){var e=t?t.wpgbName:null;e&&(e===this.element&&this.removePanel(),t.parentElement.removeChild(t),delete Y.blocks[e],this.styleSheet.deleteRules("idle",e),this.styleSheet.deleteRules("idlebefore",e),this.styleSheet.deleteRules("idleafter",e),this.styleSheet.deleteRules("hover",e),this.styleSheet.deleteRules("hoverbefore",e),this.styleSheet.deleteRules("hoverafter",e),this.styleSheet.deleteRules("animate",e),e===this.element&&(this.element=null),this.checkDroppables())}.bind(this)),V=!0},H.prototype.moveUpBlock=function(e){var t=window.getComputedStyle(e).getPropertyValue("position"),n=document.querySelectorAll(".wpgb-droppable"),i=e.previousSibling;if(V=!0,"absolute"===t||!i){for(var r,o=Array.prototype.indexOf.call(n,e.parentNode);!r||!r.offsetParent;)o--,r=n[f.modulo(n.length,o)];return r.appendChild(e),void this.checkDroppables()}e.parentNode.insertBefore(e,i),this.checkDroppables()},H.prototype.moveDownBlock=function(e){var t=window.getComputedStyle(e).getPropertyValue("position"),n=document.querySelectorAll(".wpgb-droppable"),i=e.nextSibling;if(V=!0,"absolute"===t||!i){for(var r,o=Array.prototype.indexOf.call(n,e.parentNode);!r||!r.offsetParent;)o++,r=n[f.modulo(n.length,o)];return r.insertBefore(e,r.firstChild),void this.checkDroppables()}e.parentNode.insertBefore(e,i.nextSibling),this.checkDroppables()};function W(){this.view=new g,this.styleSheet=new M,window.addEventListener("scroll",this.hide.bind(this),!1),window.addEventListener("resize",this.hide.bind(this),!1),document.addEventListener("click",this.hide.bind(this),!1),document.addEventListener("contextmenu",this.reveal.bind(this),!1),window.addEventListener("wpgb_builder.sort_start",this.hide.bind(this))}var G,U,Y;((W.prototype=Object.create(H.prototype)).constructor=W).prototype.reveal=function(e){this.hide();var t=f.getParent(e.target,".wpgb-block");t&&(e.preventDefault(),this.block=t,this.renderMenu(e))},W.prototype.hide=function(e){this.select(e),this.menu&&this.menu.parentNode&&this.menu.parentNode.removeChild(this.menu)},W.prototype.select=function(e){var t=e?f.getParent(e.target,".wpgb-context-menu-item"):null;if(t)switch(Array.prototype.indexOf.call(t.parentNode.childNodes,t)){case 0:this.block.click();break;case 1:this.duplicateBlock(this.block);break;case 2:this.deleteBlock(this.block)}},W.prototype.renderMenu=function(e){var t=U.icons,n=U.L10n.contextMenu,i={top:e.pageY+15+"px",left:e.pageX-20+"px"};this.menu=this.view.render(["div",{class:"wpgb-context-menu",style:i},["ul",{class:"wpgb-context-menu-list"},["li",{class:"wpgb-context-menu-item"},["svg",["use",{"xlink:href":t.settings}]],n.edit],["li",{class:"wpgb-context-menu-item"},["svg",["use",{"xlink:href":t.clipboard}]],n.duplicate],["li",{class:"wpgb-context-menu-item"},["svg",["use",{"xlink:href":t.delete}]],n.delete]]]),document.body.appendChild(this.menu)};var V,X=[],$=[];function J(){var e=document.querySelector(".wpgb-builder-right-panel");e.style.minHeight=window.innerHeight-window.pageYOffset-e.getBoundingClientRect().top-20+"px"}new y(".wpgb-builder-ruler-h canvas","horizontal"),new y(".wpgb-builder-ruler-v canvas","vertical"),document.body.classList.add("wpgb-card-preview"),jQuery.ajax({url:ajaxurl,type:"POST",data:{nonce:document.querySelector("#wpgb_fields_nonce").value,action:"wpgb_card",method:"get_settings",object:"settings",id:document.querySelector('[name="wpgb_id"]').value},error:function(e){WPGB_Popup_Message("unknown","error")},success:function(e){e.success&&e.content?(G=e.content.fonts,U=e.content.content,Y=e.content.settings,wpgb_builder_blocks=e.content.blocks,wpgb_builder_layout=e.content.layers,function(){(function(){var t=[];U.panels.blocks.fields.filter(function(e){return-1<["source","post_field","term_field","user_field","product_field"].indexOf(e.id)}).forEach(function(e){t[e.id]=e});var e=U.panels.general.fields.filter(function(e){return"available-blocks"===e.id});e=e[0]&&e[0].icons;var n=wpgb_builder_blocks,i=[t.source.options,t.post_field.options,t.term_field.options,t.user_field.options,t.product_field.options];X=i=i.reduce(function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},{});for(var r=0,o=0;o<n.length;o++){if(n[o].blocks){var a={};for(var s in wpgb_builder_blocks[o].blocks)if(wpgb_builder_blocks[o].blocks.hasOwnProperty(s)){var l=wpgb_builder_blocks[o].blocks[s],c=l.settings.content,d=c.source;i[l.name]?(X[l.name]=i[l.name],$[l.name]=e[l.name],l.icon=l.name,l.name=i[l.name]):d&&c[d]&&!X[c[d]]?(X[c[d]]=l.name,$[c[d]]=l.icon):"custom_block"===d&&(l.block_name=s,l.settings.content.block_name=s,X[s]=l.name,$[s]=l.icon),a[r]=l,r++}wpgb_builder_blocks[o].blocks=a}}})(),new w,new q,new F,new H,new W,new j,(new I).init();var e=document.querySelector(".wpgb-preloader");e.classList.add("wpgb-loaded");U.panels.general.fields.filter(function(e){return"available-blocks"===e.id});setTimeout(function(){e.parentElement.removeChild(e)},600)}()):WPGB_Popup_Message("unknown","error")}}),J(),window.addEventListener("resize",J,!0)}();